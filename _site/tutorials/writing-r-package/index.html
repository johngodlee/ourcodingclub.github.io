<!DOCTYPE html>
<html lang="en-GB">
	<head>
    	<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Writing R packages in Rstudio</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- CSS -->
<link rel="stylesheet" href="/css/main.css"/>
<link rel="stylesheet" href="/css/owlcarousel/owl.carousel.css">
<link rel="stylesheet" href="/css/owlcarousel/owl.theme.default.css">

<!-- JS -->
<script src="https://use.fontawesome.com/4dd22df1f8.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="/scripts/accordion.js"></script>
<script src="/scripts/jquery.counterup.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/waypoints.min.js"></script>
<script src="/scripts/ticker.js"></script>

	</head>
	<body>
    	<header class="header">
	<div class="navigation-bar">
		<div id="navigation-container">
			
				<a class="logo" href="/">
  <img src="/assets/img/logos/logo_stack.svg" alt="Coding Club logo">
</a>

			
			<nav>
				<label for="hamburger">☰</label>
				<input type="checkbox" id="hamburger">
				<ul>
					
						
					<li class="item item-nav">
						<a href="/">Home</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/tutorials.html">Tutorials</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/course.html">Course</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/team.html">Team</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/involve.html">Get involved</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/links.html">Links</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/contact.html">Contact</a>
					</li>
					
				</ul>
			</nav>
		</div>
	</div>
</header>

			<div class="block">
	<center>
		<img src="/img/tutheaderdatavis2.png" alt="Img">
	</center>
</div>

<h3 id="tutorial-content">Tutorial Content</h3>

<h4 id="-1-introduction-what-is-an-r-package-"><a href="#intro"> 1. Introduction: What is an R package? </a></h4>

<h4 id="-2-packages-that-need-to-be-installed-"><a href="#install"> 2. Packages that need to be installed </a></h4>

<h4 id="-3-the-most-basic-r-package-"><a href="#basic"> 3. The most basic R package </a></h4>

<h4 id="-4-making-a-new-r-project--"><a href="#project"> 4. Making a new R project  </a></h4>

<h4 id="-5-adding-documentation-help-files-"><a href="#documentation"> 5. Adding documentation (help files) </a></h4>

<h4 id="-6-uploading-to-and-installing-from-github-"><a href="#github"> 6. Uploading to and installing from GitHub </a></h4>

<h4 id="-7-other-useful-things-to-know-"><a href="#morestuff"> 7. Other useful things to know </a></h4>

<h4 id="-8-additional-resources-"><a href="#whatelse"> 8. Additional resources </a></h4>

<p><strong>This tutorial was originally created by the University of Stirling’s Coding Club, <a href="https://stirlingcodingclub.github.io/SCC_R_package/notebook/Rpackage_notes.html" target="_blank" rel="noopener noreferrer">and can be found at this link</a>. Our Coding Club would like to extend our deepest gratitude to them, for allowing us to publish this tutorial on our website as well. After going through this tutorial, you will be able to write a basic R package, which can be installed from <a href="http://github.com" target="_blank" rel="noopener noreferrer">Github</a>.</strong></p>

<p><a name="intro"></a></p>

<h2 id="1-introduction-what-is-an-r-package">1. Introduction: What is an R package?</h2>

<p>Packages are bundles of code and data that can be written by anyone in the R community. R Packages can serve any number of uses, and range from well documented and widely used &lt;a href=”https://cran.r-project.org/package=vegan”target=”_blank”&gt;statistical libraries&lt;/a&gt; to packages of functions that &lt;a href=”https://github.com/psolymos/KnockKnockJokes”target=”_blank”&gt;tell knock-knock jokes.&lt;/a&gt;</p>

<p>. If you have been using R for even a short length of time, you have probably needed to install and use the functions published in an R package. <strong>In these notes, I will walk you through the basics of writing your own R package</strong>. Even if you never intend to do this for your own code, I hope that this process will make you more familiar with the R packages that you use in your research, and how those packages are made.</p>

<p>A lot of R users are probably familiar with the <a href="https://cran.r-project.org/" target="_blank" rel="noopener noreferrer">Comprehensive R Archive Network (CRAN)</a>, a massive repository that currently holds over 13000 published R packages. Packages on CRAN are published for the R community and installed in RStudio using the function <code class="language-plaintext highlighter-rouge">install.packages</code>. But not every R package is or should be uploaded to CRAN. Packages can uploaded and downloaded from GitHub, or even just built for personal use (some R users have their own personal R packages with documented functions that they have written and regularly use in their own research).</p>

<p>Here I will walk through the process of writing a very simple R package, uploading it to GitHub, and downloading it from GitHub. Throughout these notes, I will present only the Rstudio version of package development, but package development can also be done using the command line (though there is really no reason to do this, as Rstudio makes the whole process much easier). There are some packages that need to be installed before we start developing.</p>

<p><a name="install"></a></p>

<h2 id="2-packages-that-need-to-be-installed">2. Packages that need to be installed</h2>

<p>Before getting started, we need to install the <a href="https://cran.r-project.org/package=devtools" target="_blank" rel="noopener noreferrer">devtools</a> and <a href="https://cran.r-project.org/package=roxygen2" target="_blank" rel="noopener noreferrer">roxygen2</a> packages. The former contains a large bundle of tools needed in package development, while the latter is used to easily write documentation.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"devtools"</span><span class="p">)</span><span class="w">
</span><span class="n">install.packages</span><span class="p">(</span><span class="s2">"roxygen2"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>It might be necessary to restart Rstudio after installing the above packages.</p>

<p><a name="basic"></a></p>

<h2 id="3-the-most-basic-r-package">3. The most basic R package</h2>

<p>Assume that we want to create an R package that includes two functions. The first function will convert temperatures from degrees Fahrenheit to degrees Celsius, while the second function will convert temperatures from degrees Celsius to degrees Fahrenheit. The first thing we need to do is create a new folder somewhere on our computer that will hold the whole R package (there are other ways of doing this, but I am showing the way that I tend to use most often).</p>

<center> <img src="/img/rpackage1.png" alt="Img" style="width: 1000px;"> </center>

<p>The above shows the new folder ‘SCC_R_package’. For now, this folder is empty. The first thing that we need to do is to create a new folder inside of `SCC_R_package’ called ‘R’.</p>

<center> <img src="/img/rpackage2.png" alt="Img" style="width: 1000px;"> </center>

<p>Inside this folder is where we will store the actual R scripts with the coded functions. Any number of ‘.R’ files can be included in the folder, and each file can have any number of functions. You could, for example, give each function its own file, or just have one file with many R functions. For large projects, I find it easiest to group similar functions in the same R file. In our new R package, I will write both functions in the same file called ‘temp_conversion.R’, which has the code below.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">F_to_C</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">F_temp</span><span class="p">){</span><span class="w">
    </span><span class="n">C_temp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">(</span><span class="n">F_temp</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">32</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">5</span><span class="o">/</span><span class="m">9</span><span class="p">;</span><span class="w">
    </span><span class="nf">return</span><span class="p">(</span><span class="n">C_temp</span><span class="p">);</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="n">C_to_F</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">C_temp</span><span class="p">){</span><span class="w">
    </span><span class="n">F_temp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">(</span><span class="n">C_temp</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">9</span><span class="o">/</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">32</span><span class="p">;</span><span class="w">
    </span><span class="nf">return</span><span class="p">(</span><span class="n">F_temp</span><span class="p">);</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>That is the whole file for now; just nine lines of code.</p>

<center> <img src="/img/rpackage3.png" alt="Img" style="width: 1000px;"> </center>

<p>The next thing that we need to do is create a new file called <code class="language-plaintext highlighter-rouge">DESCRIPTION</code> in the <code class="language-plaintext highlighter-rouge">SCC_R_package</code> directory (note, <em>not</em> in ‘R’, but just outside of it). This will be a plain text file with no extension, and it will hold some of the meta-data on the R package. For now, the whole file is just the following four lines of code, specifying the package name, type, title, and version number.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Package: SCCTempConverter
Type: Package
Title: Temperature Conversion Package for Demonstration
Version: 0.0.1.0
</code></pre></div></div>

<p>If we really wanted to call it quits, this is technically an R package, albeit an extremely basic one. We could load it using the code above after first reading in the <code class="language-plaintext highlighter-rouge">devtools</code> library.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">devtools</span><span class="p">);</span><span class="w">
</span><span class="n">load_all</span><span class="p">(</span><span class="s2">"."</span><span class="p">);</span><span class="w"> </span><span class="c1"># Working directory should be in the package SCC_R_package</span><span class="w">
</span></code></pre></div></div>

<p>Note that the working directory needs to be set correctly to the R package directory (e.g., using the <code class="language-plaintext highlighter-rouge">setwd</code> function, or by choosing <code class="language-plaintext highlighter-rouge">Session &gt; Set Working Directory</code> from the pull down menu of RStudio). In doing this, the above functions <code class="language-plaintext highlighter-rouge">F_to_C</code> and <code class="language-plaintext highlighter-rouge">C_to_F</code> are now read into R and we can use them to convert temperatures.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">F_to_C</span><span class="p">(</span><span class="m">79</span><span class="p">);</span><span class="w">
</span></code></pre></div></div>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">C_to_F</span><span class="p">(</span><span class="m">20</span><span class="p">);</span><span class="w">
</span></code></pre></div></div>

<p>This is not a good stopping point for writing a package though, because we really should include some sort of documentation explaining what the package is for and helping users know what functions do.</p>

<p><a name="project"></a></p>

<h2 id="4-making-a-new-r-project">4. Making a new R project</h2>

<p>To get started on a proper R package complete with documentation, the best thing to do is to create a new R project. To do this in Rstudio, go to <code class="language-plaintext highlighter-rouge">File &gt; New Project...</code>; the box below should pop up.</p>

<center> <img src="/img/rpackage4.png" alt="Img" style="width: 1000px;"> </center>

<p>Note that we could have started with a project right away, creating a new folder with the <strong>New Directory</strong> option. Instead, we will create the project in our <strong>Existing Directory</strong>, <code class="language-plaintext highlighter-rouge">SCC_R_package</code> by choosing the middle option. The following box should appear.</p>

<center> <img src="/img/rpackage5.png" alt="Img" style="width: 1000px;"> </center>

<p>The box above is asking for the local directory in which the project will be stored. Mine is shown above, but yours will be different depending on where <code class="language-plaintext highlighter-rouge">SCC_R_package</code> is stored. After clicking ‘Create Project’, you should be able to see the project inside the package directory.</p>

<center> <img src="/img/rpackage6.png" alt="Img" style="width: 1000px;"> </center>

<p>The R project is shown above as <code class="language-plaintext highlighter-rouge">SCC_R_package.Rproj</code>. Note that there are a couple other new things in the directory above, including <code class="language-plaintext highlighter-rouge">.Rproj.user</code> and <code class="language-plaintext highlighter-rouge">.Rbuildignore</code>. These are hidden files, so you might not see these in your own directory unless you explicitly ask your computer to show hidden files. The folder <code class="language-plaintext highlighter-rouge">.Rproj.user</code> is not really important; it stores some more meta-data about the package development. The file <code class="language-plaintext highlighter-rouge">.Rbuildignore</code> is not important for now, but could be useful later; this is just a plain text file that tells R to ignore selected files or folders when building the package (e.g., if we wanted to include a folder for our own purposes that is not needed or wanted for building the package). The interface in RStudio should now look something like the below.</p>

<center> <img src="/img/rpackage7.png" alt="Img" style="width: 1000px;"> </center>

<p>The colours you use might vary, but you should see the ‘SCC_R_package’ in the upper right indicating the project name.</p>

<p><a name="documentation"></a></p>

<h2 id="5-adding-documentation-help-files">5. Adding documentation (help files)</h2>

<p>If we want others to use the functions that we have written, we need to provide some documentation for them. Documentation shows up in the ‘Help’ tab of RStudio when running the function <code class="language-plaintext highlighter-rouge">help</code>. You can run the following code to see what I mean.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">help</span><span class="p">(</span><span class="n">lm</span><span class="p">);</span><span class="w">
</span></code></pre></div></div>

<p>Note that the code below does the same thing as the code above.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">?</span><span class="n">lm</span><span class="w">
</span></code></pre></div></div>

<p>You should see a tab pop up somewhere in Rstudio that reads a markdown file with a helpful explanation of the <code class="language-plaintext highlighter-rouge">lm</code> function in R.</p>

<center> <img src="/img/rpackage8.png" alt="Img" style="width: 1000px;"> </center>

<p>You can make one of these helpful markdown files in Rstudio using the <code class="language-plaintext highlighter-rouge">roxygen2</code> package. To do this, we need to add to the functions written in the <code class="language-plaintext highlighter-rouge">temp_conversion.R</code> file. The code below shows a simple example.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cd">#' Fahrenheit conversion</span><span class="w">
</span><span class="cd">#'</span><span class="w">
</span><span class="cd">#' Convert degrees Fahrenheit temperatures to degrees Celsius</span><span class="w">
</span><span class="cd">#' @param F_temp The temperature in degrees Fahrenheit</span><span class="w">
</span><span class="cd">#' @return The temperature in degrees Celsius</span><span class="w">
</span><span class="cd">#' @examples </span><span class="w">
</span><span class="cd">#' temp1 &lt;- F_to_C(50);</span><span class="w">
</span><span class="cd">#' temp2 &lt;- F_to_C( c(50, 63, 23) );</span><span class="w">
</span><span class="cd">#' @export</span><span class="w">
</span><span class="n">F_to_C</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">F_temp</span><span class="p">){</span><span class="w">
    </span><span class="n">C_temp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">(</span><span class="n">F_temp</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">32</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">5</span><span class="o">/</span><span class="m">9</span><span class="p">;</span><span class="w">
    </span><span class="nf">return</span><span class="p">(</span><span class="n">C_temp</span><span class="p">);</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="cd">#' Celsius conversion</span><span class="w">
</span><span class="cd">#'</span><span class="w">
</span><span class="cd">#' Convert degrees Celsius temperatures to degrees Fahrenheit</span><span class="w">
</span><span class="cd">#' @param C_temp The temperature in degrees Celsius</span><span class="w">
</span><span class="cd">#' @return The temperature in degrees Fahrenheit</span><span class="w">
</span><span class="cd">#' @examples </span><span class="w">
</span><span class="cd">#' temp1 &lt;- C_to_F(22);</span><span class="w">
</span><span class="cd">#' temp2 &lt;- C_to_F( c(-2, 12, 23) );</span><span class="w">
</span><span class="cd">#' @export</span><span class="w">
</span><span class="n">C_to_F</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="k">function</span><span class="p">(</span><span class="n">C_temp</span><span class="p">){</span><span class="w">
    </span><span class="n">F_temp</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">(</span><span class="n">C_temp</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="m">9</span><span class="o">/</span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">32</span><span class="p">;</span><span class="w">
    </span><span class="nf">return</span><span class="p">(</span><span class="n">F_temp</span><span class="p">);</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Note that the total length of the code has increased considerably to add in the documentation, but we now have some helpful reminders of how to use each function. The first line (e.g., <code class="language-plaintext highlighter-rouge">#' Fahrenheit conversion</code>) shows the function title, with the next line showing the description. Additional tags such as <code class="language-plaintext highlighter-rouge">@param</code> and <code class="language-plaintext highlighter-rouge">@examples</code> are used to write different subsections of the help file. These are not the only tags available; for more details about the Roxygen format, see <a href="http://kbroman.org/pkg_primer/pages/docs.html" target="_blank" rel="noopener noreferrer">Karl Broman’s page</a> or Hadley Wickham’s <a href="https://cran.r-project.org/web/packages/roxygen2/vignettes/roxygen2.html" target="_blank" rel="noopener noreferrer">introduction to roxygen2</a>. Using the above format, the <a href="https://cran.r-project.org/package=roxygen2" target="_blank" rel="noopener noreferrer">roxygen2 package</a> makes it easy to create help files in markdown. All that we need to do is make sure that the project is open and that the working directory is correct (typing <code class="language-plaintext highlighter-rouge">getwd()</code> should return the directory of our R package), then run the below in the console.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">roxygen2</span><span class="p">);</span><span class="w"> </span><span class="c1"># Read in the roxygen2 R package</span><span class="w">
</span><span class="n">roxygenise</span><span class="p">();</span><span class="w">      </span><span class="c1"># Builds the help files</span><span class="w">
</span></code></pre></div></div>

<p>Here is what our package directory looks like now.</p>

<center> <img src="/img/rpackage9.png" alt="Img" style="width: 1000px;"> </center>

<p>Note that two things have been added. The first is a new directory called ‘man’, which holds the help files that we have written. The second is a plain text file <code class="language-plaintext highlighter-rouge">NAMESPACE</code>, which works with R to integrate them into the package correctly; you do not need to edit <code class="language-plaintext highlighter-rouge">NAMESPACE</code> manually, in fact, the file itself tells you not to edit it. Here are the entire contents of <code class="language-plaintext highlighter-rouge">NAMESPACE</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Generated by roxygen2: do not edit by hand

export(C_to_F)
export(F_to_C)
</code></pre></div></div>

<p>Inside the ‘man’ folder, there are two new markdown documents, one for each function.</p>

<center> <img src="/img/rpackage10.png" alt="Img" style="width: 1000px;"> </center>

<p>Both are plain text files. Here are the contents of <code class="language-plaintext highlighter-rouge">F_to_C.Rd</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/temp_conversion.R
\name{F_to_C}
\alias{F_to_C}
\title{Fahrenheit conversion}
\usage{
F_to_C(F_temp)
}
\arguments{
\item{F_temp}{The temperature in degrees Fahrenheit}
}
\value{
The temperature in degrees Celsius
}
\description{
Convert degrees Fahrenheit temperatures to degrees Celsius
}
\examples{
temp1 &lt;- F_to_C(50);
temp2 &lt;- F_to_C( c(50, 63, 23) );
}
</code></pre></div></div>

<p>We can load the package now and ask for help with <code class="language-plaintext highlighter-rouge">F_to_C</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">?</span><span class="n">F_to_C</span><span class="p">;</span><span class="w">
</span></code></pre></div></div>

<p>RStudio will present the below in the ‘Help’ tab.</p>

<center> <img src="/img/rpackage11.png" alt="Img" style="width: 1000px;"> </center>

<p>Now that we have the key functions and documentation, we can upload this to GitHub for the world to see and use.</p>

<p><a name="github"></a></p>

<h2 id="6-uploading-to-and-installing-from-github">6. Uploading to and installing from GitHub</h2>

<p>Note that putting the R package on GitHub is not a requirement, but it is probably the easiest way to share your work. Before uploading the R package to GitHub, I will add one more folder to the repository.</p>

<center> <img src="/img/rpackage12.png" alt="Img" style="width: 1000px;"> </center>

<p>I use the arbitrarily named ‘notebook’ folder to hold various files that I want to be available to me in development, but not actually present in the R package. I can make the R package ignore this in build by adding a single line of code to the ‘.Rbuildignore’ file mentioned earlier. Below are the entire contents of the ‘.Rbuildignore’ file.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>^.*\.Rproj$
^\.Rproj\.user$
notebook*
</code></pre></div></div>

<p>The lines <code class="language-plaintext highlighter-rouge">^.*\.Rproj$</code> and <code class="language-plaintext highlighter-rouge">^\.Rproj\.user$</code> were already added automatically by RStudio. My added line <code class="language-plaintext highlighter-rouge">notebook*</code> tells R to ignore anything that follows ‘notebook’ in the directory. This would include anything in the folder ‘notebook’ (e.g., ‘notebook/file1.txt’), but also any folder or file that starts out with these characters (e.g., ‘notebook2/file1.txt’ or ‘notebook_stuff.txt’). I will now add these notes and all the images I have used to this folder.</p>

<center> <img src="/img/rpackage13.png" alt="Img" style="width: 1000px;"> </center>

<p>With the notebook folder now added, I need to initialise a new GitHub repository (see <a href="https://stirlingcodingclub.github.io/version_control/vc_notes.html" target="_blank" rel="noopener noreferrer">version control notes</a> for help). After doing this for Stirling Coding Club’s organisation, here is what it looks like on GitHub.</p>

<center> <img src="/img/rpackage14.png" alt="Img" style="width: 1000px;"> </center>

<p>The R package is now live. Anyone can download it by using the <code class="language-plaintext highlighter-rouge">install_github</code> function in the <code class="language-plaintext highlighter-rouge">devtools</code> package. To do so, type the below into the RStudio console.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">devtools</span><span class="p">)</span><span class="w"> </span><span class="c1"># Make sure that the devtools library is loaded</span><span class="w">
</span><span class="n">install_github</span><span class="p">(</span><span class="s2">"StirlingCodingClub/SCC_R_package"</span><span class="p">);</span><span class="w">
</span></code></pre></div></div>

<p>Our R package is now installed. We can start using it by reading it in as a normal package.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">SCCTempConverter</span><span class="p">);</span><span class="w">
</span><span class="n">F_to_C</span><span class="p">(</span><span class="m">30</span><span class="p">);</span><span class="w">
</span></code></pre></div></div>

<p>```{r, echo = FALSE}
F_to_C &lt;- function(F_temp){
    C_temp &lt;- (F_temp - 32) * 5/9;
    return(C_temp);
}
F_to_C(30);</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
That is it! We can share the &lt;a href="https://github.com/StirlingCodingClub/SCC_R_package" target="_blank"&gt;location of the R package&lt;/a&gt; with colleagues who we think might make use of its R functions. If you want to you can stop here, but I will press on with a few more helpful tips and tricks in the next section.

&lt;a name="morestuff"&gt;&lt;/a&gt; 

## 7. Other useful things to know 

**Additional subdirectories**

The subdirectories (i.e., folders) that I have walked you through are not the only ones that are useful to include in an R package. Here, for example, is what the directory of the &lt;a href="https://github.com/ConFooBio/gmse" target="_blank"&gt;GMSE R package&lt;/a&gt; looks like.

&lt;center&gt; &lt;img src="/img/rpackage15.png" alt="Img" style="width: 1000px;"/&gt; &lt;/center&gt;

There is a lot of extra stuff here, but the following are what each folder contains:

- **data** contains any and all data files provided in the R package. These files are saved in the `.rda` format (e.g., using `save()` in R), and can be loaded using `data` when a package is read into R (e.g., `data(cars)` in base R).

- **docs** includes documents for the &lt;a href="https://confoobio.github.io/gmse/" target="_blank"&gt;GMSE website&lt;/a&gt;, which was produced in less than 20 minutes using the extremely helpful &lt;a href="https://pkgdown.r-lib.org/" target="_blank"&gt;pkgdown&lt;/a&gt; R package (I highly recommend this for building website for your R package).

- **src** contains compiled code that is used by your R functions. This could include code written in C or C++ to speed up computations. In some packages, most of the code is actually in this folder.

- **tests** includes files to test your code to ensure that it is running properly throughout the development process. This folder can be created using the &lt;a href="https://cran.r-project.org/package=testthat" target="_blank"&gt;testthat&lt;/a&gt; R package. For large projects, especially, this is extremely useful because it allows you to quickly test to make sure that all of the functions that you write return the output that you expect of them.

- **vignettes** includes larger documentation files for your code -- more like a package guide than a simple help file for package functions. &lt;a href="https://confoobio.github.io/gmse/articles/SI1.html" target="_blank"&gt;Here is an example&lt;/a&gt; from GMSE.

One more folder that could be useful but is not in the GMSE R package above is the following:

- **inst** allows you to &lt;a href="http://r-pkgs.had.co.nz/inst.html" target="_blank"&gt;add arbitrary files to the R install&lt;/a&gt;. This acts as a sort of reverse '.Rbuildignore', in that it tells R to incorporate something specific into the R build process.

**Building a source package**

We can build a source package (i.e., a zipped version of the R package) in Rstudio by selecting `Build &gt; Build Source Package`. This will create a zipped package outside of the package directory, which would be what we would need to build if we wanted to submit our package to CRAN.

&lt;center&gt; &lt;img src="/img/rpackage16.png" alt="Img" style="width: 1000px;"/&gt; &lt;/center&gt;

**Tagging a version**

It is sometimes helpful to 'tag' a particular commit in git to identify a particular version or 'release' of your R package (e.g., &lt;a href="https://github.com/ConFooBio/gmse/releases" target="_blank"&gt;in GMSE&lt;/a&gt;). I did not go into detail about using git tags in the &lt;a href="https://stirlingcodingclub.github.io/version_control/vc_notes.html" target="_blank"&gt;version control&lt;/a&gt; session, but the general idea is that a tag is essentially a commit that has a meaningful name rather than a large number -- the tag is therefore a snapshot of a particular point in the history of the repository that is of particular interest. In the command line, a commit works as below.

</code></pre></div></div>
<p>git tag -a v0.0.1.0 -m “my first version of SCC_R_package”
git push -u origin v0.0.1.0
```</p>

<p>Note that the BASH code above would create the tag ‘v0.0.1.0’ with the quoted message in the first line. In the second line, it would push the tag to GitHub. We can do the same thing in <a href="https://www.gitkraken.com/" target="_blank" rel="noopener noreferrer">GitKraken</a> with a more friendly graphical user interface.</p>

<center> <img src="/img/rpackage17.png" alt="Img" style="width: 1000px;"> </center>

<p>To tag any commit, right click on the commit and select ‘Create tag here’. This allows you to name the commit, and the name will show up on the left hand side in GitKraken.</p>

<center> <img src="/img/rpackage18.png" alt="Img" style="width: 1000px;"> </center>

<p>See the ‘SCCTempConverter.v0.0.1.0’ tag on the left. To push this tag to GitHub, right click on this tag and select ‘Push SCCTempConverter.v0.0.1.0 to origin’. We can now see that there is one release in the GitHub repository.</p>

<center> <img src="/img/rpackage19.png" alt="Img" style="width: 1000px;"> </center>

<p>If we click on this, we would see the version we tagged.</p>

<p><a name="whatelse"></a></p>

<h2 id="8-additional-resources">8. Additional resources</h2>

<p><strong>From <a href="https://kbroman.org/" target="_blank" rel="noopener noreferrer">Karl Broman</a></strong></p>

<ul>
  <li><a href="http://kbroman.org/pkg_primer/pages/minimal.html" target="_blank" rel="noopener noreferrer">The minimal R package</a></li>
  <li><a href="http://kbroman.org/pkg_primer/pages/build.html" target="_blank" rel="noopener noreferrer">Building and installing an R package</a></li>
  <li><a href="http://kbroman.org/pkg_primer/pages/docs.html" target="_blank" rel="noopener noreferrer">Writing documentation with Roxygen2</a></li>
</ul>

<p><strong>From RStudio</strong></p>

<ul>
  <li><a href="http://r-pkgs.had.co.nz/" target="_blank" rel="noopener noreferrer">R packages free online book</a></li>
</ul>

<hr>

<hr>

<h3><a href="https://www.surveymonkey.co.uk/r/X7VHQ6S" target="_blank" rel="noopener noreferrer">  We would love to hear your feedback, please fill out our survey!</a></h3>
<p><br></p>
<h3>  You can contact us with any questions on <a href="mailto:ourcodingclub@gmail.com?Subject=Tutorial%20question" target="_top">ourcodingclub@gmail.com</a>
</h3>
<p><br></p>
<h3>  Related tutorials:</h3>

<ul>
  
  
</ul>
<p><br></p>
<h3>  Subscribe to our mailing list:</h3>
<div class="container">
	<div class="block">
        <!-- subscribe form start -->
		<div class="form-group">
			<form action="https://getsimpleform.com/messages?form_api_token=de1ba2f2f947822946fb6e835437ec78" method="post">
			<div class="form-group">
				<input type="text" class="form-control" name="Email" placeholder="Email" required="">
			</div>
			<div>
                        	<button class="btn btn-default" type="submit">Subscribe</button>
                    	</div>
                	</form>
		</div>
	</div>
</div>

<ul class="social-icons">
	<li>
		<h3>
			<a href="https://twitter.com/our_codingclub" target="_blank" rel="noopener noreferrer"> Follow our coding adventures on Twitter! <i class="fa fa-twitter"></i></a>
		</h3>
	</li>
</ul>


    	<footer class="footer">
	<hr>
	<div class="footer-container">
    	<ul class="footer-link-list">
        	<li><a href="/tutorials">Tutorials</a></li>
        	<li><a href="/team">About Us</a></li>
        	<li><a href="/contact">Contact us</a></li>
	    	<li><a href="https://twitter.com/our_codingclub" target="_blank" rel="noopener noreferrer">Follow us on Twitter</a></li>
    	</ul>
    	<div class="footer-text">
			<p>We are happy for people to use and further develop our tutorials - please give credit to Coding Club by linking to <a href="https://ourcodingclub.github.io/" target="_blank" rel="noopener noreferrer">our website</a>. We are also happy to discuss possible collaborations, so get in touch at <b>ourcodingclub@gmail.com</b></p>
    		<p>See our <a href="/terms">Terms of Use</a> and our <a href="/privacy">Data Privacy policy</a>.</p>
			<p>This work is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">Creative Commons Attribution-ShareAlike 4.0 International License</a></p>
			<a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img class="license" src="https://licensebuttons.net/l/by-sa/4.0/80x15.png" alt="CC-by-sa-4.0"></a>
    	</div>
    </div>
</footer>

<!-- JS -->
<script src="/scripts/owl.carousel.js"></script>
<script src="/scripts/owl.carousel-init.js"></script>
<script src="/scripts/reveal.js"></script>


	
	</body>
</html>
