<!DOCTYPE html>
<html lang="en-GB">
	<head>
    	<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Quantifying and visualising population trends</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- CSS -->
<link rel="stylesheet" href="/css/main.css"/>
<link rel="stylesheet" href="/css/owlcarousel/owl.carousel.css">
<link rel="stylesheet" href="/css/owlcarousel/owl.theme.default.css">

<!-- JS -->
<script src="https://use.fontawesome.com/4dd22df1f8.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="/scripts/accordion.js"></script>
<script src="/scripts/jquery.counterup.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/waypoints.min.js"></script>
<script src="/scripts/ticker.js"></script>

	</head>
	<body>
    	<header class="header">
	<div class="navigation-bar">
		<div id="navigation-container">
			
				<a class="logo" href="/">
  <img src="/assets/img/logos/logo_stack.svg" alt="Coding Club logo">
</a>

			
			<nav>
				<label for="hamburger">☰</label>
				<input type="checkbox" id="hamburger">
				<ul>
					
						
					<li class="item item-nav">
						<a href="/">Home</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/tutorials.html">Tutorials</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/course.html">Course</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/team.html">Team</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/involve.html">Get involved</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/links.html">Links</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/contact.html">Contact</a>
					</li>
					
				</ul>
			</nav>
		</div>
	</div>
</header>

			
	<div class="banner">
	
		
			<h1 style="color: $bannerNoImageColour">Quantifying and visualising population trends</h1>
			
				<h3 style="color: $bannerNoImageColour">Making a map of vertebrate population change in Europe</h3>
			
		
	
</div>




<div class="content">
	<p class="author">
		
			Created by Gergana
		
		
		
	</p>
	<hr>
	<h3 id="tutorial-aims">Tutorial Aims:</h3>

<ol>
  <li><a href="#tidy">Tidy dataset</a></li>
  <li><a href="#calc">Calculate population change</a></li>
  <li><a href="#map">Make a map of vertebrate population change in Europe</a></li>
</ol>

<p>All the files needed to complete this tutorial can be downloaded from <a href="https://github.com/ourcodingclub/CC-EAB" target="_blank" rel="noopener noreferrer">this Github repository</a>. Click on <code class="language-plaintext highlighter-rouge">Clone or Download/Download ZIP</code> and then unzip the files.</p>

<p><strong>This is a short tutorial we used as an example of our work at the <a href="/tutorials/tutorials/index.html">“Transferring quantitative skills among ecologists”</a> workshop we led at the Ecology Across Borders 2018 Conference in Ghent, Belgium.</strong></p>

<p>For more detailed tutorials on working with large datasets and visualising changes in populations and species’ occurrence, check out: <a href="/tutorials/seecc/index.html">Working efficiently with large datasets</a>, <a href="/tidyverse/index.html">Advanced tidyverse workflows</a> and <a href="/tutorials/occurrence/index.html">Manipulation and visualisation of species occurrence data</a>.</p>

<p><strong>In this tutorial we will create a map showing the locations of vertebrate species populations from different orders and the direction in which those populations have changed in the last 60 years. We will use a dataset from the <a href="http://www.livingplanetindex.org/home/index" target="_blank" rel="noopener noreferrer">Living Planet Index Database</a>, which is publicly available. For the purpose of this tutorial, we have extracted a subset of the database (<code class="language-plaintext highlighter-rouge">LPI_EU.csv</code>) that includes vertebrate populations from the ten most common orders in Europe - <em>Passeriformes, Carnivora, Charadriiformes, Anseriformes, Falconiformes, Salmoniformes, Ciconiiformes, Artiodactyla, Perciformes, Cypriniformes</em>.</strong></p>

<p>Here is an example map showing where the populations from the order Anseriformes were located, as well as how their populations have changed between 1950 and 2015. Looks like most of the populations have remained stable, with a slope around zero, three populations have increased and a few have decreased. Here, we have demonstrated how to do the analysis on the population level, with a focus on how all species within a given order are changing, but you can filter the dataset if there is a particular species you are interested in.</p>

<p><img src="img/anseriformes.png" alt=""></p>

<p>Figure 1. <em>Anseriformes</em> populations in Europe.</p>

<p>Open RStudio and make a new script by clicking on <code class="language-plaintext highlighter-rouge">File/New File/R Script</code>. Usually we open RStudio on half of our screen and the tutorial on the other half, as that way it’s easy to copy code across and google errors if they arise.</p>

<p><img src="/img/workshop2.png" alt=""></p>

<p>Headers and comments outline why we are taking the various steps in our analyses. Future you, your supervisors or collaborators will all benefit from informative comments.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Aim of the script</span><span class="w">
</span><span class="c1"># Your name and date</span><span class="w">

</span><span class="c1"># Set working directory to where you saved the LPI EU data</span><span class="w">
</span><span class="n">setwd</span><span class="p">(</span><span class="s2">"D:/R/workshops/AEB"</span><span class="p">)</span><span class="w">
</span><span class="c1"># This is a sample filepath, it will be different on your laptop</span><span class="w">
</span><span class="c1"># Alternatively, you can click on Session/Set Working Directory/Choose directory and navigate to your folder, but we recommend you still copy the code from the console to your script, so that future you knows from where the files came</span><span class="w">

</span><span class="c1"># Load libraries ----</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">readr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">broom</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggplot2</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">ggthemes</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">maps</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">mapdata</span><span class="p">)</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">viridis</span><span class="p">)</span><span class="w">

</span><span class="c1"># Load data ----</span><span class="w">
</span><span class="n">LPI_EU</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"AEB/LPI_EU.csv"</span><span class="p">)</span><span class="w">
</span><span class="c1"># Use read_csv not read.csv, so that the year columns are read in as characters</span><span class="w">
</span><span class="c1"># They have an awkward "x" in front of the numbers, you'll see it later when we get rid of it</span><span class="w">

</span><span class="n">head</span><span class="p">(</span><span class="n">LPI_EU</span><span class="p">)</span><span class="w">
</span><span class="n">tail</span><span class="p">(</span><span class="n">LPI_EU</span><span class="p">)</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">LPI_EU</span><span class="p">)</span><span class="w">
</span><span class="n">View</span><span class="p">(</span><span class="n">LPI_EU</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p id="tidy">The data are currently in wide format: each year is a column, which is not convenient for analysis. In a <a href="http://garrettgman.github.io/tidying/" target="_blank" rel="noopener noreferrer">tidy dataset</a> each row is an observation. We can transform the dataset into long format using the <code class="language-plaintext highlighter-rouge">gather()</code> function from the <code class="language-plaintext highlighter-rouge">tidyr</code> package.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Transform data to long format ----</span><span class="w">
</span><span class="n">LPI_long</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gather</span><span class="p">(</span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LPI_EU</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"year"</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"population"</span><span class="p">,</span><span class="w"> </span><span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">24</span><span class="o">:</span><span class="m">89</span><span class="p">)</span><span class="w">
</span><span class="c1"># `select = 24:89` refers to the columns we want to gather, from the 24th to the 89th column</span><span class="w">

</span><span class="c1"># Turn the year column into a numeric variable and get rid of the "x"</span><span class="w">
</span><span class="n">LPI_long</span><span class="o">$</span><span class="n">year</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">parse_number</span><span class="p">(</span><span class="n">LPI_long</span><span class="o">$</span><span class="n">year</span><span class="p">)</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">LPI_long</span><span class="p">)</span><span class="w">  </span><span class="c1"># population and year shouldn't be character variables</span><span class="w">
</span><span class="n">LPI_long</span><span class="o">$</span><span class="n">year</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="nf">as.character</span><span class="p">(</span><span class="n">LPI_long</span><span class="o">$</span><span class="n">year</span><span class="p">))</span><span class="w">
</span><span class="n">LPI_long</span><span class="o">$</span><span class="n">population</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="nf">as.character</span><span class="p">(</span><span class="n">LPI_long</span><span class="o">$</span><span class="n">population</span><span class="p">))</span><span class="w">
</span></code></pre></div></div>

<p>If you’ve worked with <code class="language-plaintext highlighter-rouge">dplyr</code> before, you might know that <code class="language-plaintext highlighter-rouge">parse_number</code> is meant to have converted the Year terms into numerals (from the characters that they originally were). However, sometimes R messes around and the <code class="language-plaintext highlighter-rouge">parse_number</code> function doesn’t work perfectly to convert the values to their appropriate structure - and so you would have to use <code class="language-plaintext highlighter-rouge">as.numeric</code> to convert it to numeric terms!</p>

<p>The <a href="http://www.livingplanetindex.org/home/index" target="_blank" rel="noopener noreferrer">Living Planet Index Database</a> contains records from hundreds of populations from 1950 to recent time, but the populations weren’t surveyed every year, thus there are rows which say <code class="language-plaintext highlighter-rouge">NULL</code>. We can remove those rows so that the <code class="language-plaintext highlighter-rouge">population</code> column contains only numeric values.</p>

<p>Since we will be calculating population change, to get more reliable estimates, we can conduct the analysis only using populations which have at least 5 records. Populations with only a few records might show a strong directional population change that is actually just noise in the data collection. We can also scale population size so that the abundance of each species in each year is somewhere between 0 and 1. This helps when we are analysing many different populations whose numbers are very variable - e.g. some populations have 10-20 individuals, others have thousands.</p>

<p><strong>Pipes, designated by the pipe operator <code class="language-plaintext highlighter-rouge">%&gt;%</code>, are a way to streamline your analysis. Imagine your data going in one end of a pipe, then you transform it, do some analysis on it, and then whatever comes out the other end of the pipe gets saved in the object to which you are assigning the pipe.</strong> You can find a more detailed explanation of data manipulation using <code class="language-plaintext highlighter-rouge">dplyr</code> in our <a href="https://ourcodingclub.github.io/2017/01/16/piping.html" target="_blank" rel="noopener noreferrer">data formatting and manipulation tutorial</a>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Remove rows with no population information (population = NULL)</span><span class="w">
</span><span class="n">LPI_long</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">LPI_long</span><span class="p">,</span><span class="w"> </span><span class="n">population</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="s2">"NULL"</span><span class="p">)</span><span class="w">

</span><span class="c1"># Select only populations which have at least 5 data points</span><span class="w">
</span><span class="n">LPI_long</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">LPI_long</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
	</span><span class="n">group_by</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
	</span><span class="n">filter</span><span class="p">(</span><span class="nf">length</span><span class="p">(</span><span class="n">unique</span><span class="p">(</span><span class="n">year</span><span class="p">))</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">4</span><span class="p">)</span><span class="w">

</span><span class="c1"># Scale population size to be from 0 to 1 for each population and store the info in a new column scalepop</span><span class="w">
</span><span class="n">LPI_long</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">LPI_long</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
	</span><span class="n">group_by</span><span class="p">(</span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> 
	</span><span class="n">mutate</span><span class="p">(</span><span class="n">scalepop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">population</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nf">min</span><span class="p">(</span><span class="n">population</span><span class="p">))</span><span class="o">/</span><span class="p">(</span><span class="nf">max</span><span class="p">(</span><span class="n">population</span><span class="p">)</span><span class="o">-</span><span class="nf">min</span><span class="p">(</span><span class="n">population</span><span class="p">)))</span><span class="w">
</span></code></pre></div></div>

<p id="calc">We have subsetted the data for the ten most common orders in the LPI European database so we can quantify the change in populations from an order of our choice. Alternatively, we can calculate population change for all orders or for just the marine or terrestrial ones: many options!</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># Calculate population change for an order of your choice ----</span><span class="w">
</span><span class="n">unique</span><span class="p">(</span><span class="n">LPI_long</span><span class="o">$</span><span class="n">order</span><span class="p">)</span><span class="w">  </span><span class="c1"># displays all order options</span><span class="w">
</span><span class="n">anseriformes</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">LPI_long</span><span class="p">,</span><span class="w"> </span><span class="n">order</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"Anseriformes"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><strong>We will use the <code class="language-plaintext highlighter-rouge">dplyr</code> and <code class="language-plaintext highlighter-rouge">broom</code> packages, which together create an efficient workflow in calculating population change. We will use linear models, from which we will extract the slope values. Positive slopes indicate a population increase, negative slopes signify a population decline and a slope of zero indicates no net change.</strong></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">pop_change</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">anseriformes</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">
  </span><span class="n">group_by</span><span class="p">(</span><span class="n">latitude</span><span class="p">,</span><span class="w"> </span><span class="n">longitude</span><span class="p">,</span><span class="w"> </span><span class="n">binomial</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  </span><span class="c1"># any column you want to keep, include here</span><span class="w">
  </span><span class="c1"># the functions that follow will act on the last variable in the grouping</span><span class="w">
  </span><span class="c1"># id represents a column with a unique number for each population</span><span class="w">
  </span><span class="c1"># binomial is the species name</span><span class="w">
  </span><span class="n">do</span><span class="p">(</span><span class="n">mod</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lm</span><span class="p">(</span><span class="n">scalepop</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">.</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  </span><span class="c1"># Create a linear model for each group</span><span class="w">
  </span><span class="c1"># when using a non-dplyr function in a pipe, you have to put do() around it</span><span class="w">
  </span><span class="n">tidy</span><span class="p">(</span><span class="n">mod</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  </span><span class="c1"># Extract model coefficients</span><span class="w">
  </span><span class="n">select</span><span class="p">(</span><span class="n">.</span><span class="p">,</span><span class="w"> </span><span class="n">latitude</span><span class="p">,</span><span class="w"> </span><span class="n">longitude</span><span class="p">,</span><span class="w"> </span><span class="n">binomial</span><span class="p">,</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="n">term</span><span class="p">,</span><span class="w"> </span><span class="n">estimate</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  </span><span class="c1"># select the columns we want</span><span class="w">
  </span><span class="n">spread</span><span class="p">(</span><span class="n">.</span><span class="p">,</span><span class="w"> </span><span class="n">term</span><span class="p">,</span><span class="w"> </span><span class="n">estimate</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w">  </span><span class="c1"># transform them in a useful format</span><span class="w">
  </span><span class="n">ungroup</span><span class="p">()</span><span class="w">  </span><span class="c1"># get rid of the grouping</span><span class="w">
</span></code></pre></div></div>

<p id="map">We are now all set to make our map! This is a simple map we will make using <code class="language-plaintext highlighter-rouge">ggplot2</code> - it doesn’t have topography, or cities and roads. Instead, it presents a stylised view of European countries and focuses on where the different populations are located and how they have changed.</p>

<p>We are using the <code class="language-plaintext highlighter-rouge">viridis</code> package for the colour palette of the points. The <code class="language-plaintext highlighter-rouge">viridis</code> package contains four colour palettes, which are friendly to colour blind people and they look quite nice in general.</p>

<p>You can use the default <code class="language-plaintext highlighter-rouge">viridis</code> palette by just specifying <code class="language-plaintext highlighter-rouge">scale_colour_viridis()</code> and if you want to try the other three options, you can instead use <code class="language-plaintext highlighter-rouge">scale_colour_viridis(option = "magma")</code>. The other two options are <code class="language-plaintext highlighter-rouge">inferno</code> and <code class="language-plaintext highlighter-rouge">plasma</code>.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">(</span><span class="n">EU_pop</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">ggplot</span><span class="p">(</span><span class="n">pop_change</span><span class="p">,</span><span class="w"> </span><span class="n">aes</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">longitude</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">latitude</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">year</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">borders</span><span class="p">(</span><span class="s2">"world"</span><span class="p">,</span><span class="w"> </span><span class="n">xlim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">-10</span><span class="p">,</span><span class="w"> </span><span class="m">25</span><span class="p">),</span><span class="w"> </span><span class="n">ylim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">40</span><span class="p">,</span><span class="w"> </span><span class="m">80</span><span class="p">),</span><span class="w"> </span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gray40"</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"gray75"</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.3</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">theme_map</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">geom_point</span><span class="p">(</span><span class="n">shape</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">21</span><span class="p">,</span><span class="w"> </span><span class="n">colour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"black"</span><span class="p">,</span><span class="w"> </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.8</span><span class="p">,</span><span class="w"> </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">position_jitter</span><span class="p">(</span><span class="n">w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.5</span><span class="p">,</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1.5</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="c1"># there are quite a few points, so we can use jittering to avoid overplotting</span><span class="w">
    </span><span class="n">scale_fill_viridis</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">theme</span><span class="p">(</span><span class="n">legend.position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"right"</span><span class="p">,</span><span class="w">
          </span><span class="n">legend.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">16</span><span class="p">),</span><span class="w">
          </span><span class="n">legend.text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">12</span><span class="p">),</span><span class="w">
          </span><span class="n">legend.justification</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"center"</span><span class="p">,</span><span class="w">
          </span><span class="n">plot.title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">element_text</span><span class="p">(</span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">20</span><span class="p">,</span><span class="w"> </span><span class="n">vjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="n">hjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.6</span><span class="p">,</span><span class="w"> </span><span class="n">face</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"italic"</span><span class="p">))</span><span class="w"> </span><span class="o">+</span><span class="w">
    </span><span class="n">labs</span><span class="p">(</span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Slope\n"</span><span class="p">,</span><span class="w"> </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Anseriformes"</span><span class="p">))</span><span class="w">  </span><span class="c1"># \n adds a blank line below the legend title</span><span class="w">
</span></code></pre></div></div>

<p>Note that putting your entire ggplot code in brackets () creates the figure and then shows it in the plot viewer. If you don’t have the brackets, you’ve only created the object, but haven’t visualized it. You would then have to call the object such that it will be displayed by just typing <code class="language-plaintext highlighter-rouge">EU_pop</code> after you’ve created the “EU_pop” object.</p>

<p><strong>We can save our map using <code class="language-plaintext highlighter-rouge">ggsave()</code> from the <code class="language-plaintext highlighter-rouge">ggplot2</code> package. The default <code class="language-plaintext highlighter-rouge">width</code> and <code class="language-plaintext highlighter-rouge">height</code> are measured in inches. If you want to swap to pixels or centimeters, you can add <code class="language-plaintext highlighter-rouge">units = "px"</code> or <code class="language-plaintext highlighter-rouge">units = "cm"</code> inside the <code class="language-plaintext highlighter-rouge">ggsave()</code> brackets, e.g. <code class="language-plaintext highlighter-rouge">ggsave(object, filename = "mymap.png", width = 1000, height = 1000, units = "px"</code>.</strong></p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ggsave</span><span class="p">(</span><span class="n">EU_pop</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"anseriformes.pdf"</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span><span class="n">ggsave</span><span class="p">(</span><span class="n">EU_pop</span><span class="p">,</span><span class="w"> </span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"anseriformes.png"</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">10</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p><img src="/img/anseriformes.png" alt=""></p>

<p>Figure 1. <em>Anseriformes</em> populations in Europe.</p>

<p>Here we have created a map for <em>Anseriformes</em>, an order which includes many species of waterfowl, like the mallard and pochard. Curious to see how vertebrate populations across the whole LPI database have changed? You can check out our <a href="https://ourcodingclub.github.io/2017/03/20/seecc.html" target="_blank" rel="noopener noreferrer">tutorial on efficient ways to quantify population change</a>, where we compare how for-loops, <code class="language-plaintext highlighter-rouge">lapply()</code> functions and pipes compare when it comes to dealing with a lot of data.</p>

<h3 id="wed-love-to-see-the-maps-youve-made-so-feel-free-to-email-them-to-us-at-ourcodingclubgmailcom">We’d love to see the maps you’ve made so feel free to email them to us at ourcodingclub@gmail.com!</h3>


	<div class="survey">
	<hr>
	<hr>
	
		<h4><a href="" target="_blank">We would love to hear your feedback, please fill out our survey!</a></h4>
	
	<h4>Contact us with any questions on <a href="mailto:ourcodingclub@gmail.com?Subject=Tutorial%20question" target="_top">ourcodingclub@gmail.com</a>
</h4>
	<br>
	<h3>Related tutorials:</h3>
	
		
  			
    				
			
    				
			
    				
			
		
	
		
  			
		
	
		
  			
    				
			
    				
			
		
	
		
  			
		
	
		
  			
		
	
		
  			
		
	
		
  			
    				
			
		
	
		
  			
    				
			
		
	
		
  			
    				
			
		
	
		
  			
    				
			
    				
			
		
	
		
  			
    				
			
		
	
		
  			
		
	
		
  			
		
	
		
  			
		
	
		
  			
		
	
		
  			
    				
			
    				
			
		
	
		
  			
    				
			
    				
			
		
	
		
  			
    				
			
    				
			
		
	
		
  			
    				
			
    				
			
    				
			
		
	
		
  			
    				
			
    				
			
		
	
		
  			
    				
			
		
	
		
  			
		
	
		
  			
		
	
		
	
		
  			
    				
			
		
	
		
  			
    				
			
    				
			
		
	
		
  			
		
	
		
  			
    				
			
		
	
		
  			
		
	
		
  			
    				
			
    				
			
    				
			
		
	
		
  			
    				
			
    				
			
    				
			
		
	
		
  			
		
	
		
  			
    				
			
    				
			
		
	
		
  			
    				
			
    				
			
    				
			
		
	
		
  			
    				
			
    				
			
		
	
		
  			
    				
			
		
	
		
  			
    				
			
    				
			
    				
			
		
	
		
  			
    				
			
    				
			
		
	
		
  			
    				
			
		
	
		
  			
    				
			
    				
			
    				
			
		
	
		
  			
    				
			
		
	
		
  			
    				
			
    				
			
    				
			
		
	
		
  			
    				
			
    				
			
		
	
		
  			
    				
			
    				
			
    				
			
    				
			
		
	
		
  			
    				
			
    				
			
    				
			
		
	
		
  			
    				
			
    				
			
    				
			
		
	
		
  			
		
	
		
  			
    				
			
		
	
	<br>
	<h3>Subscribe to our mailing list:</h3>

	<div class="container">
		<div class="block">
			<!-- subscribe form start -->
			<div class="form-group">
				<form action="https://getsimpleform.com/messages?form_api_token=de1ba2f2f947822946fb6e835437ec78" method="post">
					<div class="form-group">
						<input type="text" class="form-control" name="Email" placeholder="Email" required>
					</div>
					<div>
            			<button class="btn btn-default" type="submit">Subscribe</button>
        			</div>
            	</form>
			</div>
		</div>
	</div>
</div>

</div>

    	<footer class="footer">
	<hr>
	<div class="footer-container">
    	<ul class="footer-link-list">
        	<li><a href="/tutorials">Tutorials</a></li>
        	<li><a href="/team">About Us</a></li>
        	<li><a href="/contact">Contact us</a></li>
	    	<li><a href="https://twitter.com/our_codingclub" target="_blank" rel="noopener noreferrer">Follow us on Twitter</a></li>
    	</ul>
    	<div class="footer-text">
			<p>We are happy for people to use and further develop our tutorials - please give credit to Coding Club by linking to <a href="https://ourcodingclub.github.io/" target="_blank" rel="noopener noreferrer">our website</a>. We are also happy to discuss possible collaborations, so get in touch at <b>ourcodingclub@gmail.com</b></p>
    		<p>See our <a href="/terms">Terms of Use</a> and our <a href="/privacy">Data Privacy policy</a>.</p>
			<p>This work is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">Creative Commons Attribution-ShareAlike 4.0 International License</a></p>
			<a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img class="license" src="https://licensebuttons.net/l/by-sa/4.0/80x15.png" alt="CC-by-sa-4.0"></a>
    	</div>
    </div>
</footer>

<!-- JS -->
<script src="/scripts/owl.carousel.js"></script>
<script src="/scripts/owl.carousel-init.js"></script>
<script src="/scripts/reveal.js"></script>


	
	</body>
</html>
