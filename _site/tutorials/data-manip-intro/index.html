<!DOCTYPE html>
<html lang="en-GB">
	<head>
    	<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>Basic data manipulation</title>
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">

<!-- CSS -->
<link rel="stylesheet" href="/css/main.css"/>
<link rel="stylesheet" href="/css/owlcarousel/owl.carousel.css">
<link rel="stylesheet" href="/css/owlcarousel/owl.theme.default.css">

<!-- JS -->
<script src="https://use.fontawesome.com/4dd22df1f8.js"></script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="/scripts/accordion.js"></script>
<script src="/scripts/jquery.counterup.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/waypoints/2.0.5/waypoints.min.js"></script>
<script src="/scripts/ticker.js"></script>

	</head>
	<body>
    	<header class="header">
	<div class="navigation-bar">
		<div id="navigation-container">
			
				<a class="logo" href="/">
  <img src="/assets/img/logos/logo_stack.svg" alt="Coding Club logo">
</a>

			
			<nav>
				<label for="hamburger">☰</label>
				<input type="checkbox" id="hamburger">
				<ul>
					
						
					<li class="item item-nav">
						<a href="/">Home</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/tutorials.html">Tutorials</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/course.html">Course</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/team.html">Team</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/involve.html">Get involved</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/links.html">Links</a>
					</li>
					
						
					<li class="item item-nav">
						<a href="/contact.html">Contact</a>
					</li>
					
				</ul>
			</nav>
		</div>
	</div>
</header>

			<div class="block"> 
          <center>
          <img src="/img/tutheader_DL_data_manip_1.png" alt="Img">
          </center>
        </div>

<h3 id="tutorial-aims">Tutorial aims:</h3>

<h4 id="1-learn-base-r-syntax-for-data-manipulation">1. Learn base R syntax for data manipulation</h4>

<h5 id="---logical-operators-for-finer-control"><a href="#logic"> - logical operators for finer control</a></h5>
<h5 id="---creating-and-assigning-objects"><a href="#objects"> - creating and assigning objects</a></h5>
<h5 id="---specifying-factors"><a href="#factors"> - specifying factors</a></h5>

<h4 id="2-turn-messy-data-into-tidy-data-with-tidyr">2. Turn messy data into tidy data with <code class="language-plaintext highlighter-rouge">tidyr</code>
</h4>

<h4 id="3-use-efficient-tools-from-the-dplyr-package-to-manipulate-data">3. Use efficient tools from the <code class="language-plaintext highlighter-rouge">dplyr</code> package to manipulate data</h4>

<h3 id="steps">Steps:</h3>

<h4 id="-subset-extract-and-modify-data-with-r-base-operators"><a href="#base"> Subset, extract and modify data with R base operators</a></h4>

<h4 id="-what-is-tidy-data-and-how-do-we-achieve-it"><a href="#tidy"> What is tidy data, and how do we achieve it?</a></h4>

<h4 id="-explore-the-most-common-and-useful-functions-of-dplyr-"><a href="#dplyr"> Explore the most common and useful functions of <code class="language-plaintext highlighter-rouge">dplyr</code> </a></h4>

<h5 id="---rename"><a href="#rename"> - <code class="language-plaintext highlighter-rouge">rename()</code></a></h5>
<h5 id="---filterand-select"><a href="#filter"> - <code class="language-plaintext highlighter-rouge">filter()</code>and <code class="language-plaintext highlighter-rouge">select()</code></a></h5>
<h5 id="---mutate"><a href="#mutate"> - <code class="language-plaintext highlighter-rouge">mutate()</code></a></h5>
<h5 id="---group_by"><a href="#group_by"> - <code class="language-plaintext highlighter-rouge">group_by()</code></a></h5>
<h5 id="---summarise"><a href="#summarise"> - <code class="language-plaintext highlighter-rouge">summarise()</code></a></h5>
<h5 id="---join"><a href="#join"> - <code class="language-plaintext highlighter-rouge">join()</code></a></h5>

<h4 id="-challenge-yourself"><a href="#challenge"> Challenge yourself!</a></h4>

<p>Data come in all sorts of different shapes and formats, and what is useful or practical for one application is not necessarily so for another. R has specific requirements about the setup and the types of data that can be passed to functions, so one of the best skills in your coding toolbox is being able to play with your data like putty and give it any shape you need!</p>

<p>This tutorial is an introduction to data manipulation and only requires an understanding of how to import and create objects in R. That said, there’s still a lot of content in here for a beginner, so do not hesitate to complete only the base R section in one session, and the <code class="language-plaintext highlighter-rouge">dplyr</code> section in another. (Remember! The beauty of a script is that you can pick up where you left off, anytime.)</p>

<div class="bs-callout-blue">
  <p><strong>Haven’t used R before, or need a refresher?</strong> No worries! Check out our <a href="https://ourcodingclub.github.io/2016/11/13/intro-to-r.html" target="_blank" rel="noopener noreferrer">Intro to R and RStudio tutorial</a>, and then come back here to master tidy data management!</p>

  <p><strong>Know all of this already?</strong> Fast forward to our <a href="https://ourcodingclub.github.io/2017/01/06/data-manip-efficient.html" target="_blank" rel="noopener noreferrer">Efficient Data Manipulation tutorial</a> for more advanced <code class="language-plaintext highlighter-rouge">dplyr</code> fun.</p>
</div>

<p>In this tutorial, we will start by showing some ways to manipulate data using <em>base R</em> syntax (without any extra package), because you will often see solutions online using this syntax, and it is good to understand how objects are built (and how to take them apart). After that, we will introduce principles of tidy data to encourage best practice in data collection and organisation. We will then start using packages from the <a href="https://www.tidyverse.org/" target="_blank" rel="noopener noreferrer"> Tidyverse </a>, which is quickly becoming the norm in R data science, and offers a neater, clearer way of coding than using only base R functions.</p>

<h4 id="note--all-the-files-you-need-to-complete-this-tutorial-can-be-downloaded-from-this-repository-clone-and-download-the-repo-as-a-zip-file-then-unzip-it"><strong>Note : all the files you need to complete this tutorial can be downloaded from <a href="https://github.com/ourcodingclub/CC-3-DataManip" target="_blank" rel="noopener noreferrer">this repository</a>. Clone and download the repo as a zip file, then unzip it.</strong></h4>

<p><a name="base"></a></p>

<h3 id="subset-extract-and-modify-data-with-r-operators">Subset, extract and modify data with R operators</h3>

<p>Data frames are R objects made of rows and columns containing observations of different variables: you will often be importing your data that way. Sometimes, you might notice some mistakes after importing, need to rename a variable, or keep only a subset of the data that meets some conditions. Let’s dive right in and do that on the <code class="language-plaintext highlighter-rouge">EmpetrumElongation.csv</code> dataset that you have downloaded from the repository.</p>

<h4 id="create-a-new-blank-script-and-add-in-some-information-at-the-top-for-instance-the-title-of-the-tutorial-your-name-and-the-date-remember-to-use-hasthags--to-comment-and-annotate-your-script"><strong>Create a new, blank script, and add in some information at the top, for instance the title of the tutorial, your name, and the date (remember to use hasthags <code class="language-plaintext highlighter-rouge">#</code> to comment and annotate your script).</strong></h4>

<p>This dataset represents annual increments in stem growth, measured on crowberry shrubs on a sand dune system. The <code class="language-plaintext highlighter-rouge">Zone</code> field corresponds to distinct zones going from closest (2) to farthest (7) from the sea.</p>

<center> <img src="/img/crowberry.jpg" alt="Img" style="width: 800px;"> </center>
<center>  A crowberry shrub, <i> Empetrum hermaphroditum</i>. Isn't it pretty? </center>

<p>We have seen in our <a href="https://ourcodingclub.github.io/2016/11/13/intro-to-r.html" target="_blank" rel="noopener noreferrer">intro tutorial</a> that we can access variables in R by using the dollar sign <code class="language-plaintext highlighter-rouge">$</code>. This is already one way of subsetting, as it essentially reduces your data frame (2 dimensions) to a vector (1 dimension). You can also access parts of a data frame using square brackets <code class="language-plaintext highlighter-rouge">[ , ]</code>. The first number you put will get the row number, and the second the column. Leave one blank to keep all rows or all columns.</p>

<p><a id="Acode01" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code01">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># Set your working directory to where the folder is saved on your computer</span><span class="w">
</span><span class="n">setwd</span><span class="p">(</span><span class="s2">"file-path"</span><span class="p">)</span><span class="w">

</span><span class="c1"># Load the elongation data</span><span class="w">
</span><span class="n">elongation</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"EmpetrumElongation.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">   

</span><span class="c1"># Check import and preview data</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">elongation</span><span class="p">)</span><span class="w">   </span><span class="c1"># first few observations</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">elongation</span><span class="p">)</span><span class="w">    </span><span class="c1"># types of variables</span><span class="w">

</span><span class="c1"># Let's get some information out of this object!</span><span class="w">
</span><span class="n">elongation</span><span class="o">$</span><span class="n">Indiv</span><span class="w">   </span><span class="c1"># prints out all the ID codes in the dataset</span><span class="w">
</span><span class="nf">length</span><span class="p">(</span><span class="n">unique</span><span class="p">(</span><span class="n">elongation</span><span class="o">$</span><span class="n">Indiv</span><span class="p">))</span><span class="w">   </span><span class="c1"># returns the number of distinct shrubs in the data</span><span class="w">

</span><span class="c1"># Here's how we get the value in the second row and fifth column</span><span class="w">
</span><span class="n">elongation</span><span class="p">[</span><span class="m">2</span><span class="p">,</span><span class="m">5</span><span class="p">]</span><span class="w">

</span><span class="c1"># Here's how we get all the info for row number 6</span><span class="w">
</span><span class="n">elongation</span><span class="p">[</span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">

</span><span class="c1"># And of course you can mix it all together! </span><span class="w">
</span><span class="n">elongation</span><span class="p">[</span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="o">$</span><span class="n">Indiv</span><span class="w">   </span><span class="c1"># returns the value in the column Indiv for the sixth observation</span><span class="w">
</span><span class="c1"># (much easier calling columns by their names than figuring out where they are!) </span><span class="w">

</span></code></pre></div>  </div>
</section>

<p>Subsetting with brackets using row and column numbers can be quite tedious if you have a large dataset and you don’t know where the observations you’re looking for are situated! And it’s never recommended anyway, because if you hard-code a number in your script and you add some rows later on, you might not be selecting the same observations anymore! That’s why we can use <strong>logical operations</strong> to access specific parts of the data that match our specification.</p>

<p><a id="Acode02" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code02">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># Let's access the values for Individual number 603</span><span class="w">
</span><span class="n">elongation</span><span class="p">[</span><span class="n">elongation</span><span class="o">$</span><span class="n">Indiv</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">603</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre></div>  </div>
</section>

<p>There’s a lot to unpack here! We’re saying: “Take this dataframe (<code class="language-plaintext highlighter-rouge">elongation</code>), subset it (<code class="language-plaintext highlighter-rouge">[ , ]</code>) so as to keep the rows (writing the expression on the left-hand of the comma) for which the value in the column Indiv (<code class="language-plaintext highlighter-rouge">$Indiv</code>) is exactly (<code class="language-plaintext highlighter-rouge">==</code>) 603”. <strong>Note</strong>: The logical expression works here because the Indiv column contains numeric values: to access data that is of character or factor type, you would use quotation marks: <code class="language-plaintext highlighter-rouge">elongation$Indiv == "six-hundred-and-three"</code>.</p>

<p><a name="logic"></a></p>
<div class="bs-callout-blue">

  <h4 id="operators-for-logical-operations">Operators for logical operations</h4>

  <p>Here are some of the most commonly used operators to manipulate data. When you use them to create a subsetting condition, R will evaluate the expression, and return only the observations for which the condition is met.</p>

  <p><code class="language-plaintext highlighter-rouge">==</code>: equals exactly</p>

  <p><code class="language-plaintext highlighter-rouge">&lt;</code>, <code class="language-plaintext highlighter-rouge">&lt;=</code>: is smaller than, is smaller than or equal to</p>

  <p><code class="language-plaintext highlighter-rouge">&gt;</code>, <code class="language-plaintext highlighter-rouge">&gt;=</code>: is bigger than, is bigger than or equal to</p>

  <p><code class="language-plaintext highlighter-rouge">!=</code>: not equal to</p>

  <p><code class="language-plaintext highlighter-rouge">%in%</code>: belongs to one of the following (usually followed by a vector of possible values)</p>

  <p><code class="language-plaintext highlighter-rouge">&amp;</code>: AND operator, allows you to chain two conditions which must both be met</p>

  <p><code class="language-plaintext highlighter-rouge">|</code>: OR operator, to chains two conditions when at least one should be met</p>

  <p><code class="language-plaintext highlighter-rouge">!</code>: NOT operator, to specify things that should be omitted</p>

</div>

<p>Let’s see them in action!</p>

<p><a id="Acode03" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code03">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="w">
</span><span class="c1"># Subsetting with one condition</span><span class="w">

</span><span class="n">elongation</span><span class="p">[</span><span class="n">elongation</span><span class="o">$</span><span class="n">Zone</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">    </span><span class="c1"># returns only the data for zones 2-3</span><span class="w">
</span><span class="n">elongation</span><span class="p">[</span><span class="n">elongation</span><span class="o">$</span><span class="n">Zone</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">   </span><span class="c1"># returns only the data for zones 2-3-4</span><span class="w">


</span><span class="c1"># This is completely equivalent to the last statement</span><span class="w">
</span><span class="n">elongation</span><span class="p">[</span><span class="o">!</span><span class="n">elongation</span><span class="o">$</span><span class="n">Zone</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">   </span><span class="c1"># the ! means exclude</span><span class="w">


</span><span class="c1"># Subsetting with two conditions</span><span class="w">
</span><span class="n">elongation</span><span class="p">[</span><span class="n">elongation</span><span class="o">$</span><span class="n">Zone</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">elongation</span><span class="o">$</span><span class="n">Zone</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">7</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">    </span><span class="c1"># returns only data for zones 2 and 7</span><span class="w">
</span><span class="n">elongation</span><span class="p">[</span><span class="n">elongation</span><span class="o">$</span><span class="n">Zone</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">elongation</span><span class="o">$</span><span class="n">Indiv</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">300</span><span class="o">:</span><span class="m">400</span><span class="p">),</span><span class="w"> </span><span class="p">]</span><span class="w">    </span><span class="c1"># returns data for shrubs in zone 2 whose ID numbers are between 300 and 400</span><span class="w">

</span></code></pre></div>  </div>
</section>

<p>As you can see, the more demanding you are with your conditions, the more cluttered the code becomes. We will soon learn some functions that perform these actions in a cleaner, more minimalist way, but sometimes you won’t be able to escape using base R (especially when dealing with non-data-frame objects), so it’s good to understand these notations.</p>

<p><a name="objects"></a></p>
<div class="bs-callout-grey">

  <p>Did you notice that last bit of code: <code class="language-plaintext highlighter-rouge">c(300:400)</code> ? We saw in our <a href="https://ourcodingclub.github.io/2016/11/13/intro-to-r.html" target="_blank" rel="noopener noreferrer">intro tutorial</a> that we can use <code class="language-plaintext highlighter-rouge">c()</code> to <em>concatenate</em> elements in a vector. Using a colon between the two numbers means <em>counting up from 300 to 400</em>.</p>

  <p>Other useful vector sequence builders are:</p>

  <p><strong><code class="language-plaintext highlighter-rouge">seq()</code></strong> to create a sequence, incrementing by any specified amount. E.g. try <code class="language-plaintext highlighter-rouge">seq(300, 400, 10)</code></p>

  <p><strong><code class="language-plaintext highlighter-rouge">rep()</code></strong> to create repetitions of elements. E.g. <code class="language-plaintext highlighter-rouge">rep(c(1,2), 3)</code> will give <code class="language-plaintext highlighter-rouge">1 2 1 2 1 2</code>.</p>

  <p>You can mix and match! What would <code class="language-plaintext highlighter-rouge">rep(seq(0, 30, 10), 4)</code>give?</p>

</div>

<p>And finally, let’s say you need to modify some values or factor levels, or want to create a new column? Now that you know how to access parts of a dataframe, you can do all of that. You only need an extra tool: the assign arrow <code class="language-plaintext highlighter-rouge">&lt;-</code> to overwrite data.</p>

<div class="bs-callout-yellow">

  <h4 id="creating-and-overwriting-objects">Creating and overwriting objects</h4>

  <p>Remember how we’ve been using the arrow <code class="language-plaintext highlighter-rouge">&lt;-</code> to create new objects? This is a special convention in R that allows you to pick whichever name you want and assign it to an object (vector, list, data frame…).</p>

  <p>Something to keep in mind is that <strong>if you use a name again in a same session, it will overwrite the former object</strong>. With experience, you can start making changes to an object and overwrite as you go, to “update” the object rather than creating many intermediaries (“object1”, “object2”, …). However, when you’re starting out, it’s a good idea to create these intermediary objects, or at least to create a “working copy” that you can reassign to the main data object once you’re satisfied with the changes.</p>

  <p>As you will now see, we can also make use of the arrow <code class="language-plaintext highlighter-rouge">&lt;-</code> to overwrite specific values or range of values we need to change.</p>

</div>

<p><a id="Acode04" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code04">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">## CHANGING VARIABLE NAMES AND VALUES IN A DATA FRAME</span><span class="w">

</span><span class="c1"># Let's create a working copy of our object</span><span class="w">
</span><span class="n">elong2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">elongation</span><span class="w">

</span><span class="c1"># Now suppose you want to change the name of a column: you can use the names() function</span><span class="w">
</span><span class="c1"># Used on its own, it returns a vector of the names of the columns. Used on the left side of the assign arrow, it overwrites all or some of the names to value(s) of your choice. </span><span class="w">

</span><span class="nf">names</span><span class="p">(</span><span class="n">elong2</span><span class="p">)</span><span class="w">                 </span><span class="c1"># returns the names of the columns</span><span class="w">

</span><span class="nf">names</span><span class="p">(</span><span class="n">elong2</span><span class="p">)[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"zone"</span><span class="w">    </span><span class="c1"># Changing Zone to zone: we call the 1st element of the names vector using brackets, and assign it a new value</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">elong2</span><span class="p">)[</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s2">"ID"</span><span class="w">      </span><span class="c1"># Changing Indiv to ID: we call the 2nd element and assign it the desired value</span><span class="w">

</span><span class="c1"># Now suppose there's a mistake in the data, and the value 5.1 for individual 373 in year 2008 should really be 5.7</span><span class="w">

</span><span class="c1">## - option 1: you can use row and column number</span><span class="w">
</span><span class="n">elong2</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="m">4</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">5.7</span><span class="w">

</span><span class="c1">## - option 2: you can use logical conditions for more control</span><span class="w">
</span><span class="n">elong2</span><span class="p">[</span><span class="n">elong2</span><span class="o">$</span><span class="n">ID</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">373</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="o">$</span><span class="n">X2008</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">5.7</span><span class="w">   </span><span class="c1"># completely equivalent to option 1</span><span class="w">

</span></code></pre></div>  </div>
</section>

<p><strong>Can you spot pros and cons of options 1 and 2 above?</strong></p>

<p><em>Option 1</em> is compact, but requires you to know exactly where the value to be corrected is. If you reimport your dataset at a later time with new values, it may not be in the same place.</p>

<p><em>Option 2</em> is longer and more difficult to read (it uses brackets to extracts the row corresponding to individual #373, and then the dollar sign to access just the column called X2008), but provides fine control, and the code will run even if the observation moves in your dataset.</p>

<p>Using the same techniques, you can specify variable classes, which will be highly useful when we get to designing <a href="https://ourcodingclub.github.io/2017/02/28/modelling.html" target="_blank" rel="noopener noreferrer">statistical models</a> and need grouping variables like factors.</p>

<p><a name="factors"></a></p>

<p><a id="Acode05" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code05">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">## CREATING A FACTOR</span><span class="w">

</span><span class="c1"># Let's check the classes </span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">elong2</span><span class="p">)</span><span class="w">

</span><span class="c1"># The zone column shows as integer data (whole numbers), but it's really a grouping factor (the zones could have been called A, B, C, etc.) Let's turn it into a factor:</span><span class="w">

</span><span class="n">elong2</span><span class="o">$</span><span class="n">zone</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">as.factor</span><span class="p">(</span><span class="n">elong2</span><span class="o">$</span><span class="n">zone</span><span class="p">)</span><span class="w">        </span><span class="c1"># converting and overwriting original class</span><span class="w">
</span><span class="n">str</span><span class="p">(</span><span class="n">elong2</span><span class="p">)</span><span class="w">                                  </span><span class="c1"># now zone is a factor with 6 levels</span><span class="w">

</span></code></pre></div>  </div>
</section>

<p>And what if you’re not happy with the factor levels? You can see the names of the factors with the <code class="language-plaintext highlighter-rouge">levels()</code> function… and yes, overwrite them, too.</p>

<p><a id="Acode06" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code06">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1">## CHANGING A FACTOR'S LEVELS</span><span class="w">

</span><span class="n">levels</span><span class="p">(</span><span class="n">elong2</span><span class="o">$</span><span class="n">zone</span><span class="p">)</span><span class="w">  </span><span class="c1"># shows the different factor levels</span><span class="w">

</span><span class="n">levels</span><span class="p">(</span><span class="n">elong2</span><span class="o">$</span><span class="n">zone</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"A"</span><span class="p">,</span><span class="w"> </span><span class="s2">"B"</span><span class="p">,</span><span class="w"> </span><span class="s2">"C"</span><span class="p">,</span><span class="w"> </span><span class="s2">"D"</span><span class="p">,</span><span class="w"> </span><span class="s2">"E"</span><span class="p">,</span><span class="w"> </span><span class="s2">"F"</span><span class="p">)</span><span class="w">   </span><span class="c1"># you can overwrite the original levels with new names</span><span class="w">

</span><span class="c1"># You must make sure that you have a vector the same length as the number of factors, and pay attention to the order in which they appear!</span><span class="w">

</span></code></pre></div>  </div>
</section>

<p>That was a lot, but now you’ll be able to adapt these little chunks of code to manipulate your own data. The next sections will hopefully make things even easier, as they’ll teach you more intuitive functions to accomplish the same things.</p>

<p><a name="#tidy"> </a></p>

<h3 id="what-is-tidy-data-and-how-do-we-achieve-it">What is tidy data, and how do we achieve it?</h3>

<p>The way you record information in the field or in the lab is probably very different to the way you want your data entered into R. In the field, you want tables that you can ideally draw up ahead of time and fill in as you go, and you will be adding notes and all sorts of information in addition to the data you want to analyse. For instance, if you monitor the height of seedlings during a factorial experiment using warming and fertilisation treatments, you might record your data like this:</p>

<center> <img src="/img/SAB_fig1.png" alt="Img" style="width: 500px;"> </center>

<p>Let’s say you want to run a test to determine whether warming and/or fertilisation affected seedling growth. You may know how your experiment is set up, but R doesn’t! At the moment, with 8 measures per row (combination of all treatments and species for one replicate, or block), you cannot run an analysis. On the contrary, 
<a href="https://www.jstatsoft.org/article/view/v059i10" target="_blank" rel="noopener noreferrer">tidy datasets</a> are arranged so that each <strong>row</strong> represents an <strong>observation</strong> and each <strong>column</strong> represents a <strong>variable</strong>. In our case, this would look something like this:</p>

<center> <img src="/img/SAB_fig2.png" alt="Img" style="width: 400px;"> </center>

<p>This makes a much longer dataframe row-wise, which is why this form is often called <em>long format</em>. Now if you wanted to compare between groups, treatments, species, etc., R would be able to split the dataframe correctly, as each grouping factor has its own column.</p>

<p><strong>Based on this, do you notice something not quite tidy with our previous object <code class="language-plaintext highlighter-rouge">elongation</code>?</strong> We have observation of the same variable, i.e. stem length, spread across multiple columns representing different years.</p>

<p>The <code class="language-plaintext highlighter-rouge">gather()</code> function from the <code class="language-plaintext highlighter-rouge">tidyr</code> package will let us convert this wide-format table to a tidy dataframe. We want to create a single column <strong>Year</strong> that will have years currently in the columns (2007-2012) repeated for each individual. From this, you should be able to work out that the dataframe will be six times longer than the original. We also want a column <strong>Length</strong> where all the growth data associated to each year and individual will go.</p>

<p><em>Note</em>: This function is slightly unusual as you are making up your own column names in the second (key) and third (value) arguments, rather than passing them pre-defined objects or values like most R functions. Here, year is our key and length is our value.</p>

<p><a id="Acode07" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code07">
  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"tidyr"</span><span class="p">)</span><span class="w">  </span><span class="c1"># install the package</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">tidyr</span><span class="p">)</span><span class="w">             </span><span class="c1"># load the package</span><span class="w">


</span><span class="n">elongation_long</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gather</span><span class="p">(</span><span class="n">elongation</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="p">,</span><span class="w"> </span><span class="n">Length</span><span class="p">,</span><span class="w">                           </span><span class="c1"># in this order: data frame, key, value</span><span class="w">
                          </span><span class="nf">c</span><span class="p">(</span><span class="n">X2007</span><span class="p">,</span><span class="w"> </span><span class="n">X2008</span><span class="p">,</span><span class="w"> </span><span class="n">X2009</span><span class="p">,</span><span class="w"> </span><span class="n">X2010</span><span class="p">,</span><span class="w"> </span><span class="n">X2011</span><span class="p">,</span><span class="w"> </span><span class="n">X2012</span><span class="p">))</span><span class="w">        </span><span class="c1"># we need to specify which columns to gather</span><span class="w">

</span><span class="c1"># Here we want the lengths (value) to be gathered by year (key) </span><span class="w">

</span><span class="c1"># Let's reverse! spread() is the inverse function, allowing you to go from long to wide format</span><span class="w">
</span><span class="n">elongation_wide</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">spread</span><span class="p">(</span><span class="n">elongation_long</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="p">,</span><span class="w"> </span><span class="n">Length</span><span class="p">)</span><span class="w"> 

</span></code></pre></div>  </div>
</section>

<p>Notice how we used the column names to tell <code class="language-plaintext highlighter-rouge">gather()</code> which columns to reshape. This is handy if you only have a few, and if the columns change order eventually, the function will still work. However, if you have a dataset with columns for 100 genes, for instance, you might be better off specifying the column numbers:</p>

<p><a id="Acode08" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code08">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">elongation_long2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gather</span><span class="p">(</span><span class="n">elongation</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="p">,</span><span class="w"> </span><span class="n">Length</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="o">:</span><span class="m">8</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
</section>

<p>However, these functions have limitations and will not work on every data structure. To quote <a href="https://www.jstatsoft.org/article/view/v059i10" target="_blank" rel="noopener noreferrer">Hadley Wickham</a>, <b>“every messy dataset is messy in its own way”</b>. This is why giving a bit of thought to your dataset structure <em>before</em> doing your digital entry can spare you a lot of frustration later!</p>

<p>Once you have the data in the right format, it’s much easier to analyse them and visualise the results. For example, if we want to find out if there is inter-annual variation in the growth of <i>Empetrum hermaphroditum</i>, we can quickly make a boxplot:</p>

<p><a id="Acode09" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code09">
  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">boxplot</span><span class="p">(</span><span class="n">Length</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">Year</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">elongation_long</span><span class="p">,</span><span class="w"> 
        </span><span class="n">xlab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Year"</span><span class="p">,</span><span class="w"> </span><span class="n">ylab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Elongation (cm)"</span><span class="p">,</span><span class="w"> 
	</span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Annual growth of Empetrum hermaphroditum"</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
</section>

<center> <img src="/img/emni-annual.jpeg" alt="Img" style="width: 600px;"> </center>
<center> Annual growth of <i>Empetrum hermaphroditum</i>. </center>

<p>From looking at the boxplot, there is a fairly big overlap between the annual growth in each year - nothing special to see. (Don’t worry, we’ll learn to make much prettier and interesting graphs in our <a href="https://ourcodingclub.github.io/2017/01/29/datavis.html" target="_blank" rel="noopener noreferrer">data visualisation</a> tutorials.)</p>

<p><a name="dplyr"></a></p>

<h3 id="explore-the-most-common-and-useful-functions-of-dplyr">Explore the most common and useful functions of <code class="language-plaintext highlighter-rouge">dplyr</code>
</h3>

<p>The package <code class="language-plaintext highlighter-rouge">dplyr</code> is a fantastic bundle of intuitive functions for data manipulation, named after the action they perform. A big advantage of these functions is that they take your <strong>data frame</strong> as a first argument, so that you can refer to columns without explicitly having to refer to the full object (so you can drop those <code class="language-plaintext highlighter-rouge">$</code> signs!). Let’s meet the most common and useful functions by working on the long format object we just created, <code class="language-plaintext highlighter-rouge">elongation_long</code>. First, install and load the package.</p>

<p><a id="Acode10" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code10">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">install.packages</span><span class="p">(</span><span class="s2">"dplyr"</span><span class="p">)</span><span class="w">  </span><span class="c1"># install the package</span><span class="w">
</span><span class="n">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span><span class="w">              </span><span class="c1"># load the package</span><span class="w">
</span></code></pre></div>  </div>
</section>

<p><a name="rename"></a></p>
<h4 id="1-rename-variables">1. <code class="language-plaintext highlighter-rouge">rename()</code> variables</h4>

<p>This lets you change the name(s) of a column or columns. The first argument is the data frame, the second (and third, etc.) takes the form <strong>New name = Old name</strong>.</p>

<p><a id="Acode11" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code11">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">elongation_long</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rename</span><span class="p">(</span><span class="n">elongation_long</span><span class="p">,</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Zone</span><span class="p">,</span><span class="w"> </span><span class="n">indiv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Indiv</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Year</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Length</span><span class="p">)</span><span class="w">     </span><span class="c1"># changes the names of the columns (getting rid of capital letters) and overwriting our data frame</span><span class="w">

</span><span class="c1"># As we saw earlier, the base R equivalent would have been</span><span class="w">
</span><span class="nf">names</span><span class="p">(</span><span class="n">elongation_long</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"zone"</span><span class="p">,</span><span class="w"> </span><span class="s2">"indiv"</span><span class="p">,</span><span class="w"> </span><span class="s2">"year"</span><span class="p">,</span><span class="w"> </span><span class="s2">"length"</span><span class="p">)</span><span class="w">

</span></code></pre></div>  </div>
</section>

<p><a name="filter"></a></p>
<h4 id="2-filter-rows-and-selectcolumns">2. <code class="language-plaintext highlighter-rouge">filter()</code> rows and <code class="language-plaintext highlighter-rouge">select()</code>columns</h4>

<p>These are some of the most routine functions that let you reduce your data frame to just the rows and columns you need. The <code class="language-plaintext highlighter-rouge">filter()</code> function works great for subsetting rows with logical operations. The <code class="language-plaintext highlighter-rouge">select()</code> function lets you specify which columns to keep. <strong>Note: the <code class="language-plaintext highlighter-rouge">select()</code> function often clashes with functions of the same name in other packages, and for that reason it is recommended to always use the notation <code class="language-plaintext highlighter-rouge">dplyr::select()</code> when calling it.</strong></p>

<p><a id="Acode12" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code12">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># FILTER OBSERVATIONS</span><span class="w">

</span><span class="c1"># Let's keep observations from zones 2 and 3 only, and from years 2009 to 2011</span><span class="w">

</span><span class="n">elong_subset</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">elongation_long</span><span class="p">,</span><span class="w"> </span><span class="n">zone</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="n">year</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"X2009"</span><span class="p">,</span><span class="w"> </span><span class="s2">"X2010"</span><span class="p">,</span><span class="w"> </span><span class="s2">"X2011"</span><span class="p">))</span><span class="w"> </span><span class="c1"># you can use multiple different conditions separated by commas</span><span class="w">

</span><span class="c1"># For comparison, the base R equivalent would be (not assigned to an object here):</span><span class="w">
</span><span class="n">elongation_long</span><span class="p">[</span><span class="n">elongation_long</span><span class="o">$</span><span class="n">zone</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">elongation_long</span><span class="o">$</span><span class="n">year</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"X2009"</span><span class="p">,</span><span class="w"> </span><span class="s2">"X2010"</span><span class="p">,</span><span class="w"> </span><span class="s2">"X2011"</span><span class="p">),</span><span class="w"> </span><span class="p">]</span><span class="w">
</span></code></pre></div>  </div>
</section>

<p>Note that here, we use <code class="language-plaintext highlighter-rouge">%in%</code> as a logical operator because we are looking to match a list of exact (character) values. If you want to keep observations within a range of <em>numeric</em> values, you either need two logical statements in your <code class="language-plaintext highlighter-rouge">filter()</code> function, e.g. <code class="language-plaintext highlighter-rouge">length &gt; 4 &amp; length &lt;= 6.5</code> or you can use the convenient <code class="language-plaintext highlighter-rouge">between()</code> function, e.g. <code class="language-plaintext highlighter-rouge">between(length, 4, 6.5)</code>.</p>

<p>See how <code class="language-plaintext highlighter-rouge">dplyr</code>is already starting to shine by avoiding repetition and calling directly the column names without needing to call the object every time?</p>

<div class="bs-callout-yellow">

  <p><strong>To quote or not to quote?</strong></p>

  <p>You may have noticed how we sometimes call values in quotes <code class="language-plaintext highlighter-rouge">""</code>, and sometimes not. This depends on:</p>

  <ul>
    <li>
      <p><em>Whether the value you are calling is a character or numeric value</em>: above, <code class="language-plaintext highlighter-rouge">zone</code> is of class <em>integer</em> (a number), so we don’t need quotes around the values it takes, but <code class="language-plaintext highlighter-rouge">year</code> is a <em>character</em> (letters), so needs them.</p>
    </li>
    <li>
      <p><em>Whether you are calling an existing object or referring to a value that R does not yet know about</em>: compare <br>
<code class="language-plaintext highlighter-rouge">new.object &lt;- elongation_long</code> and <br>
<code class="language-plaintext highlighter-rouge">new.object &lt;- "elongation_long"</code> <br></p>
    </li>
  </ul>

  <p>The first creates a duplicate of our object, because R recognises the name as an object in our environment. In the second case, you’re creating an object consisting of one character value.</p>

  <p>It takes time and practice to get used to these conventions, but just keep an eye out for <a href="https://ourcodingclub.github.io/2016/11/15/troubleshooting.html" target="_blank" rel="noopener noreferrer"> error messages </a> and you’ll get there.</p>

</div>

<p>Now that we know how to subset rows, let’s do the same with columns!</p>

<p><a id="Acode13" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code13">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># SELECT COLUMNS</span><span class="w">

</span><span class="c1"># Let's ditch the zone column just as an example</span><span class="w">

</span><span class="n">elong_no.zone</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dplyr</span><span class="o">::</span><span class="n">select</span><span class="p">(</span><span class="n">elongation_long</span><span class="p">,</span><span class="w"> </span><span class="n">indiv</span><span class="p">,</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">length</span><span class="p">)</span><span class="w">   </span><span class="c1"># or alternatively</span><span class="w">
</span><span class="n">elong_no.zone</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dplyr</span><span class="o">::</span><span class="n">select</span><span class="p">(</span><span class="n">elongation_long</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="n">zone</span><span class="p">)</span><span class="w"> </span><span class="c1"># the minus sign removes the column</span><span class="w">

</span><span class="c1"># For comparison, the base R equivalent would be (not assigned to an object here):</span><span class="w">
</span><span class="n">elongation_long</span><span class="p">[</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="m">-1</span><span class="p">]</span><span class="w">  </span><span class="c1"># removes first column</span><span class="w">

</span><span class="c1"># A nice hack! select() lets you rename and reorder columns on the fly</span><span class="w">
</span><span class="n">elong_no.zone</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dplyr</span><span class="o">::</span><span class="n">select</span><span class="p">(</span><span class="n">elongation_long</span><span class="p">,</span><span class="w"> </span><span class="n">Year</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">Shrub.ID</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">indiv</span><span class="p">,</span><span class="w"> </span><span class="n">Growth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">length</span><span class="p">)</span><span class="w">

</span><span class="c1"># Neat, uh?</span><span class="w">

</span></code></pre></div>  </div>
</section>

<p><a name="mutate"></a></p>
<h4 id="3-mutate-your-dataset-by-creating-new-columns">3. <code class="language-plaintext highlighter-rouge">mutate()</code> your dataset by creating new columns</h4>

<p>Something we have not yet touched on is how to create a new column. This is useful when you want to perform an operation on multiple columns, or perhaps reclassify a factor. The <code class="language-plaintext highlighter-rouge">mutate()</code> function does just that, and also lets you define the name of the column. Here let’s use our old wide-format object <code class="language-plaintext highlighter-rouge">elongation</code> and create a column representing total growth for the period 2007-2012:</p>

<p><a id="Acode14" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code14">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># CREATE A NEW COLUMN </span><span class="w">

</span><span class="n">elong_total</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">elongation</span><span class="p">,</span><span class="w"> </span><span class="n">total.growth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">X2007</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">X2008</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">X2009</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">X2010</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">X2011</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">X2012</span><span class="p">)</span><span class="w">

</span></code></pre></div>  </div>
</section>

<p>Now, let’s see how we could accomplish the same thing on our long-format data <code class="language-plaintext highlighter-rouge">elongation_long</code> by using two functions that pair extremely well together: <code class="language-plaintext highlighter-rouge">group_by()</code> and <code class="language-plaintext highlighter-rouge">summarise()</code>.</p>

<p><a name="group"></a></p>
<h4 id="4-group_by-certain-factors-to-perform-operations-on-chunks-of-data">4. <code class="language-plaintext highlighter-rouge">group_by()</code> certain factors to perform operations on chunks of data</h4>

<p>The most important thing to understand about this function is that you don’t see any visible change to your data frame. It creates an internal grouping structure, which means that every subsequent function you run on it will use these groups, and not the whole dataset, as an input. It’s very useful when you want to compute summary statistics for different sites, treatments, species, etc.</p>

<p><a id="Acode15" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code15">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># GROUP DATA</span><span class="w">

</span><span class="n">elong_grouped</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">group_by</span><span class="p">(</span><span class="n">elongation_long</span><span class="p">,</span><span class="w"> </span><span class="n">indiv</span><span class="p">)</span><span class="w">   </span><span class="c1"># grouping our dataset by individual</span><span class="w">

</span></code></pre></div>  </div>
</section>

<p>Compare <code class="language-plaintext highlighter-rouge">elong_grouped</code> and <code class="language-plaintext highlighter-rouge">elongation_long</code> : they should look exactly the same. But now, let’s use <code class="language-plaintext highlighter-rouge">summarise()</code> to calculate total growth of each individual over the years.</p>

<p><a name="summarise"></a></p>
<h4 id="5-summarise-data-with-a-range-of-summary-statistics">5. <code class="language-plaintext highlighter-rouge">summarise()</code> data with a range of summary statistics</h4>

<p>This function will always agregate your original data frame, i.e. the output data frame will be shorter than the input. Here, let’s contrast summing growth increments over the study period on the original dataset vs our new <strong>grouped</strong> dataset.</p>

<p><a id="Acode16" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code16">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># SUMMARISING OUR DATA</span><span class="w">

</span><span class="n">summary1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarise</span><span class="p">(</span><span class="n">elongation_long</span><span class="p">,</span><span class="w"> </span><span class="n">total.growth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">length</span><span class="p">))</span><span class="w">
</span><span class="n">summary2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarise</span><span class="p">(</span><span class="n">elong_grouped</span><span class="p">,</span><span class="w"> </span><span class="n">total.growth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">length</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
</section>

<p>The first summary corresponds to the sum of <strong>all</strong> growth increments in the dataset (all individuals and years). The second one gives us a breakdown of total growth <strong>per individual</strong>, our grouping variable. Amazing! We can compute all sorts of summary statistics, too, like the mean or standard deviation of growth across years:</p>

<p><a id="Acode17" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code17">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">summary3</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">summarise</span><span class="p">(</span><span class="n">elong_grouped</span><span class="p">,</span><span class="w"> </span><span class="n">total.growth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">length</span><span class="p">),</span><span class="w">
                                     </span><span class="n">mean.growth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">(</span><span class="n">length</span><span class="p">),</span><span class="w">
                                     </span><span class="n">sd.growth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sd</span><span class="p">(</span><span class="n">length</span><span class="p">))</span><span class="w">
</span></code></pre></div>  </div>
</section>

<p>Less amazing is that we lose all the other columns not specified at the grouping stage or in a summary operation. For instance, we lost the column year because there are 5 years for each individual, and we’re summarising to get one single growth value per individual. Always create a new object for summarised data, so that your full dataset doesn’t go away! You can always merge back some information at a later stage, like we will see now.</p>

<p><a name="join"></a></p>
<h4 id="6-_join-datasets-based-on-shared-attributes">6. <code class="language-plaintext highlighter-rouge">..._join()</code> datasets based on shared attributes</h4>

<p>Sometimes you have multiple data files concerning a same project: one for measurements taken at various sites, others with climate data at these sites, and perhaps some metadata about your experiment. Depending on your analytical needs, it may be very useful to have all the information in one table. This is where merging, or joining, datasets comes in handy.</p>

<p>Let’s imagine that the growth data we have been working with actually comes from an experiment where some plants where warmed with portable greenhouses (W), others were fertilised (F), some received both treatments (WF) and some were control plants (C). We will import this data from the file <code class="language-plaintext highlighter-rouge">EmpetrumTreatments.csv</code>, which contains the details of which individuals received which treatments, and join it with our main dataset <code class="language-plaintext highlighter-rouge">elongation_long</code>. We can do this because both datasets have a column representing the ID of each plant: this is what we will merge by.</p>

<p>There are <a href="https://dplyr.tidyverse.org/reference/join.html" target="_blank" rel="noopener noreferrer"> many types of joins </a> you can perform, which will make sense to you if you are familiar with the SQL language. They differ in how they handle data that is not shared by both tables, so always ask yourself which observations you need to keep and which you want to drop, and look up the help pages if necessary (in doubt, <code class="language-plaintext highlighter-rouge">full_join()</code> will keep everything). In the following example, we want to keep all the information in <code class="language-plaintext highlighter-rouge">elong_long</code> and have the treatment code repeated for the five occurrences of every individual, so we will use <code class="language-plaintext highlighter-rouge">left_join()</code>.</p>

<p><a id="Acode18" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code18">

  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="c1"># Load the treatments associated with each individual</span><span class="w">

</span><span class="n">treatments</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"EmpetrumTreatments.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">,</span><span class="w"> </span><span class="n">sep</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">";"</span><span class="p">)</span><span class="w">
</span><span class="n">head</span><span class="p">(</span><span class="n">treatments</span><span class="p">)</span><span class="w">

</span><span class="c1"># Join the two data frames by ID code. The column names are spelled differently, so we need to tell the function which columns represent a match. We have two columns that contain the same information in both datasets: zone and individual ID.</span><span class="w">

</span><span class="n">experiment</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">left_join</span><span class="p">(</span><span class="n">elongation_long</span><span class="p">,</span><span class="w"> </span><span class="n">treatments</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"indiv"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Indiv"</span><span class="p">,</span><span class="w"> </span><span class="s2">"zone"</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Zone"</span><span class="p">))</span><span class="w">

</span><span class="c1"># We see that the new object has the same length as our first data frame, which is what we want. And the treatments corresponding to each plant have been added!</span><span class="w">
</span></code></pre></div>  </div>
</section>

<p>If the columns to match have the exact same name, you can omit them as they are usually automatically detected. However, it is good practice to specify the merging condition, as it ensures more control over the function. The equivalent base R function is <code class="language-plaintext highlighter-rouge">merge()</code> and actually works very well, too:</p>

<p><a id="Acode19" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code19">
  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">experiment2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">merge</span><span class="p">(</span><span class="n">elongation_long</span><span class="p">,</span><span class="w"> </span><span class="n">treatments</span><span class="p">,</span><span class="w"> </span><span class="n">by.x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"zone"</span><span class="p">,</span><span class="w"> </span><span class="s2">"indiv"</span><span class="p">),</span><span class="w"> </span><span class="n">by.y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"Zone"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Indiv"</span><span class="p">))</span><span class="w">  
</span><span class="c1"># same result!</span><span class="w">
</span></code></pre></div>  </div>
</section>

<p>Now that we have gone to the trouble of adding treatments into our data, let’s check if they affect growth by drawing another box plot.</p>

<p><a id="Acode20" class="copy" name="copy_pre" href="#"> <i class="fa fa-clipboard"></i> Copy Contents </a><br></p>
<section id="code20">
  <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">boxplot</span><span class="p">(</span><span class="n">length</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">Treatment</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">experiment</span><span class="p">)</span><span class="w">
</span></code></pre></div>  </div>
</section>

<center> <img src="/img/emni-treatments.jpeg" alt="Img" style="width: 600px;"> </center>
<center> Effects of warming (W) and fertilisation (F) treatments on crowberry growth (fictional data!). </center>

<p>Are these differences statistically significant? We’ll find out how to test this in our <a href="https://ourcodingclub.github.io/2017/02/28/modelling.html" target="_blank" rel="noopener noreferrer">modelling tutorial!</a></p>

<p>But for now, don’t you think it’s enough for one tutorial? Congratulations for powering through and getting this far! If you want to test your knowledge, try your hand at the data manipulation challenge below.</p>

<p><a name="base"></a></p>
<h3 id="challenge-yourself">Challenge yourself!</h3>

<p>Let’s see if you can apply some of the functions we have learned today in a different context. In the repository, you will find the file <code class="language-plaintext highlighter-rouge">dragons.csv</code>, which gives the length (in cm) of the fire plumes breathed by dragons of different species when fed different spices.</p>

<p>Your challenge is to make the data tidy (long format) and to create a boxplot <strong>for each species</strong> showing the effect of the spices on plume size, so you can answer the questions: <strong>Which spice triggers the most fiery reaction? And the least?</strong></p>

<div class="bs-callout-yellow">
  <p><strong>However</strong>, you find out that your field assistant was a bit careless during data collection, and let slip many mistakes which you will need to correct.</p>

  <ol>
    <li>The fourth treatment wasn’t paprika at all, it was turmeric.</li>
    <li>There was a calibration error with the measuring device for the tabasco trial, but only for the Hungarian Horntail species. All measurements are 30 cm higher than they should be.</li>
    <li>The lengths are given in centimeters, but really it would make sense to convert them to meters.</li>
  </ol>
</div>

<p><strong>Now let’s see what you can do!</strong></p>

<details>
   <summary> Stuck? Click for a few hints </summary>
    <summary>

    <ol>
      <li>
        <p>Struggling to rename the paprika column? Think about the handy <code class="language-plaintext highlighter-rouge">rename()</code> function!</p>
      </li>
      <li>
        <p>There are many ways to correct a selection of values, but they will all involve accessing these specific data by combining conditional statements about the treatment/column (tabasco) and the species (horntail). You could store the correct values in a vector, and overwrite the old values by using appropriate subsetting. (Tip: arithmetic operations on a vector are applied to each element individually, so that <code class="language-plaintext highlighter-rouge">c(1, 2, 3) + 1</code> returns <code class="language-plaintext highlighter-rouge">2, 3, 4</code>.)</p>
      </li>
      <li>
        <p>The <code class="language-plaintext highlighter-rouge">mutate()</code> function lets you create a new column that can be based on existing columns. Ideal for things like converting units… It may be wise to have all the plume lengths in one column (long, or tidy format), before using this.</p>
      </li>
      <li>
        <p>Struggling to reshape the dataset? Remember that you are trying to <code class="language-plaintext highlighter-rouge">gather()</code> the <em>plume</em> observations (value) by treatment, in this case <em>spice</em> (key).</p>
      </li>
    </ol>

  </summary>   
 </details>

<p><br></p>

<details>
   <summary> Click this line to see the solution </summary>
    <summary>

    <p>Here is a solution to clean the data and achieve the boxplots.</p>

    <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="w">
</span><span class="c1">## Load data</span><span class="w">

</span><span class="n">dragons</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"dragons.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w">


</span><span class="c1">## Clean the dataset</span><span class="w">

</span><span class="c1"># Change paprika to turmeric</span><span class="w">

</span><span class="n">dragons</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">rename</span><span class="p">(</span><span class="n">dragons</span><span class="p">,</span><span class="w"> </span><span class="n">turmeric</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paprika</span><span class="p">)</span><span class="w">


</span><span class="c1"># Fix the calibration error for tabasco by horntail</span><span class="w">

</span><span class="n">correct.values</span><span class="w">  </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dragons</span><span class="o">$</span><span class="n">tabasco</span><span class="p">[</span><span class="n">dragons</span><span class="o">$</span><span class="n">species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"hungarian_horntail"</span><span class="p">]</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">30</span><span class="w">   </span><span class="c1"># create a vector of corrected values</span><span class="w">

</span><span class="n">dragons</span><span class="p">[</span><span class="n">dragons</span><span class="o">$</span><span class="n">species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"hungarian_horntail"</span><span class="p">,</span><span class="w"> </span><span class="s2">"tabasco"</span><span class="p">]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">correct.values</span><span class="w">      </span><span class="c1"># overwrite the values in the dragons object</span><span class="w">

</span></code></pre></div>    </div>
    <p>Here, it might have been simpler to change these values after reshaping the data to long format. You might also have used a dplyr solution. There are many ways to achieve a same result in R! In the next data manipulation tutorial, we will learn more ways to recode variables or change many values at once. As a taster, a neat way to do the above would be to use dplyr’s <code class="language-plaintext highlighter-rouge">mutate()</code> function along with the logical function <code class="language-plaintext highlighter-rouge">ifelse()</code> to conditionally change only these values:</p>

    <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="n">dragons.2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">dragons</span><span class="p">,</span><span class="w"> </span><span class="n">tabasco</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ifelse</span><span class="p">(</span><span class="n">species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"hungarian_horntail"</span><span class="p">,</span><span class="w"> </span><span class="n">tabasco</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="m">30</span><span class="p">,</span><span class="w"> </span><span class="n">tabasco</span><span class="p">))</span><span class="w">

</span><span class="c1"># This creates (overwrites) the column tabasco using the following logic: if the species is Hungarian Horntail, deduct 30 from the values in the (original) tabasco column; if the species is NOT horntail (i.e. all other species), write the original values.</span><span class="w">
</span></code></pre></div>    </div>
    <p>But whatever works for you! Now let’s finish cleaning the dataset and make those plots:</p>

    <div class="language-r highlighter-rouge">
<div class="highlight"><pre class="highlight"><code><span class="w">
</span><span class="c1"># Reshape the data from wide to long format</span><span class="w">

</span><span class="n">dragons_long</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">gather</span><span class="p">(</span><span class="n">dragons</span><span class="p">,</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"spice"</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"plume"</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s2">"tabasco"</span><span class="p">,</span><span class="w"> </span><span class="s2">"jalapeno"</span><span class="p">,</span><span class="w"> </span><span class="s2">"wasabi"</span><span class="p">,</span><span class="w"> </span><span class="s2">"turmeric"</span><span class="p">))</span><span class="w">


</span><span class="c1"># Convert the data into meters</span><span class="w">

</span><span class="n">dragons_long</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">mutate</span><span class="p">(</span><span class="n">dragons_long</span><span class="p">,</span><span class="w"> </span><span class="n">plume.m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plume</span><span class="o">/</span><span class="m">100</span><span class="p">)</span><span class="w">    </span><span class="c1"># Creating a new column turning cm into m</span><span class="w">


</span><span class="c1"># Create a subset for each species to make boxplots</span><span class="w">

</span><span class="n">horntail</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">dragons_long</span><span class="p">,</span><span class="w"> </span><span class="n">species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"hungarian_horntail"</span><span class="p">)</span><span class="w">            </span><span class="c1"># the dplyr way of filtering</span><span class="w">
</span><span class="n">green</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">filter</span><span class="p">(</span><span class="n">dragons_long</span><span class="p">,</span><span class="w"> </span><span class="n">species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"welsh_green"</span><span class="p">)</span><span class="w">
</span><span class="n">shortsnout</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">dragons_long</span><span class="p">[</span><span class="n">dragons_long</span><span class="o">$</span><span class="n">species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s2">"swedish_shortsnout"</span><span class="p">,</span><span class="w"> </span><span class="p">]</span><span class="w">   </span><span class="c1"># maybe you opted for a base R solution instead?</span><span class="w">


</span><span class="c1"># Make the boxplots</span><span class="w">

</span><span class="n">par</span><span class="p">(</span><span class="n">mfrow</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">))</span><span class="w">      </span><span class="c1"># you need not have used this, but it splits your plotting device into 3 columns where the plots will appear, so all the plots will be side by side.</span><span class="w">

   </span><span class="n">boxplot</span><span class="p">(</span><span class="n">plume.m</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">spice</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">horntail</span><span class="p">,</span><span class="w">
           </span><span class="n">xlab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Spice"</span><span class="p">,</span><span class="w"> </span><span class="n">ylab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Length of fire plume (m)"</span><span class="p">,</span><span class="w">
           </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Hungarian Horntail"</span><span class="p">)</span><span class="w">


   </span><span class="n">boxplot</span><span class="p">(</span><span class="n">plume.m</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">spice</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">green</span><span class="p">,</span><span class="w">
           </span><span class="n">xlab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Spice"</span><span class="p">,</span><span class="w"> </span><span class="n">ylab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Length of fire plume (m)"</span><span class="p">,</span><span class="w">
           </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Welsh Green"</span><span class="p">)</span><span class="w">


   </span><span class="n">boxplot</span><span class="p">(</span><span class="n">plume.m</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="n">spice</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shortsnout</span><span class="p">,</span><span class="w">
           </span><span class="n">xlab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Spice"</span><span class="p">,</span><span class="w"> </span><span class="n">ylab</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Length of fire plume (m)"</span><span class="p">,</span><span class="w">
           </span><span class="n">main</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">"Swedish Shortsnout"</span><span class="p">)</span><span class="w">
  

</span></code></pre></div>    </div>
    <p>So there you are! Did your plots look something like this?</p>

    <center> <img src="/img/dragons-spice.jpeg" alt="Img" style="width: 800px;"> </center>
    <h5 id="it-looks-like-jalapeos-are-proper-dragon-fuel-but-turmeric-not-so-much">It looks like jalapeños are proper dragon fuel, but turmeric not so much!</h5>

  </summary>   
 </details>

<p><br></p>

<h3 id="tutorial-outcomes">Tutorial Outcomes:</h3>

<h4 id="1-you-can-use-and--operators-to-subset-elements-of-data-frames-in-the-classic-r-notation">1. You can use <code class="language-plaintext highlighter-rouge">$</code>and <code class="language-plaintext highlighter-rouge">[]</code> operators to subset elements of data frames in the classic R notation</h4>

<h4 id="2-you-understand-the-format-required-for-analyses-in-r-and-can-use-the-package-tidyr-to-achieve-it">2. You understand the format required for analyses in R, and can use the package <code class="language-plaintext highlighter-rouge">tidyr</code> to achieve it.</h4>

<h4 id="3-you-can-manipulate-subset-create-and-merge-data-with-dplyr">3. You can manipulate, subset, create and merge data with <code class="language-plaintext highlighter-rouge">dplyr</code>
</h4>

<h3 id="and-when-youre-ready-for-more-dplyr-tips-and-workflows-follow-up-with-our--efficient-data-manipulation-tutorial">And when you’re ready for more <code class="language-plaintext highlighter-rouge">dplyr</code> tips and workflows, follow up with our <a href="https://ourcodingclub.github.io/2017/01/06/data-manip-efficient.html" target="_blank" rel="noopener noreferrer"> Efficient data manipulation tutorial</a>!</h3>

<hr>

<hr>

<p><strong>Check out <a href="https://ourcodingclub.github.io/workshop/" target="_blank" rel="noopener noreferrer">this page</a> to learn how you can get involved! We are very happy to have people use our tutorials and adapt them to their needs. We are also very keen to expand the content on the website, so feel free to get in touch if you’d like to write a tutorial!</strong></p>

<p>This work is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">Creative Commons Attribution-ShareAlike 4.0 International License</a>. <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img src="https://licensebuttons.net/l/by-sa/4.0/80x15.png" alt="Img" style="width: 100px;"></a></p>

<h3><a href="https://www.surveymonkey.co.uk/r/9QHFW33" target="_blank" rel="noopener noreferrer">  We would love to hear your feedback, please fill out our survey!</a></h3>
<p><br></p>
<h3>  You can contact us with any questions on <a href="mailto:ourcodingclub@gmail.com?Subject=Tutorial%20question" target="_top">ourcodingclub@gmail.com</a>
</h3>
<p><br></p>
<h3>  Related tutorials:</h3>

<ul>
  
  
</ul>
<p><br></p>
<h3>  Subscribe to our mailing list:</h3>
<div class="container">
	<div class="block">
        <!-- subscribe form start -->
		<div class="form-group">
			<form action="https://getsimpleform.com/messages?form_api_token=de1ba2f2f947822946fb6e835437ec78" method="post">
			<div class="form-group">
				<input type="text" class="form-control" name="Email" placeholder="Email" required="">
			</div>
			<div>
                        	<button class="btn btn-default" type="submit">Subscribe</button>
                    	</div>
                	</form>
		</div>
	</div>
</div>

<ul class="social-icons">
	<li>
		<h3>
			<a href="https://twitter.com/our_codingclub" target="_blank" rel="noopener noreferrer"> Follow our coding adventures on Twitter! <i class="fa fa-twitter"></i></a>
		</h3>
	</li>
</ul>


    	<footer class="footer">
	<hr>
	<div class="footer-container">
    	<ul class="footer-link-list">
        	<li><a href="/tutorials">Tutorials</a></li>
        	<li><a href="/team">About Us</a></li>
        	<li><a href="/contact">Contact us</a></li>
	    	<li><a href="https://twitter.com/our_codingclub" target="_blank" rel="noopener noreferrer">Follow us on Twitter</a></li>
    	</ul>
    	<div class="footer-text">
			<p>We are happy for people to use and further develop our tutorials - please give credit to Coding Club by linking to <a href="https://ourcodingclub.github.io/" target="_blank" rel="noopener noreferrer">our website</a>. We are also happy to discuss possible collaborations, so get in touch at <b>ourcodingclub@gmail.com</b></p>
    		<p>See our <a href="/terms">Terms of Use</a> and our <a href="/privacy">Data Privacy policy</a>.</p>
			<p>This work is licensed under a <a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer">Creative Commons Attribution-ShareAlike 4.0 International License</a></p>
			<a href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noopener noreferrer"><img class="license" src="https://licensebuttons.net/l/by-sa/4.0/80x15.png" alt="CC-by-sa-4.0"></a>
    	</div>
    </div>
</footer>

<!-- JS -->
<script src="/scripts/owl.carousel.js"></script>
<script src="/scripts/owl.carousel-init.js"></script>
<script src="/scripts/reveal.js"></script>


	
	</body>
</html>
